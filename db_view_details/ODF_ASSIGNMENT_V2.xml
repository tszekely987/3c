<ClarityDBViewQuery>
  <QueryResult code="ODF_ASSIGNMENT_V2">
    <indexes/>
    <text_length>9418</text_length>
    <text>select   'x' pmd_analytical_partition_by, prassignment.prid odf_pk, BASEREC.FINISH_DATE as baseline_finish, prtask.PRISCRITICAL as priscritical, (SELECT ROLE.FULL_NAME FROM SRM_RESOURCES ROLE WHERE ROLE.ID = PRASSIGNMENT.ROLE_ID) as v_role_name, prtask.PRPRIORITY as prpriority, (CASE WHEN PRASSIGNMENT.PRACTSUM+PRASSIGNMENT.PRESTSUM=0 THEN NULL ELSE
        PRASSIGNMENT.PRACTSUM/(PRASSIGNMENT.PRACTSUM+PRASSIGNMENT.PRESTSUM) END) as pctexpended, NVL(PRASSIGNMENT.PRFINISH, PRTASK.PRFINISH) as prfinish, PRASSIGNMENT.PRSTART as por_prstart, prassignment.TEAM_ID as team_id, prtask.PRISKEY as priskey, prassignment.prIsUnplanned as prisunplanned, PRASSIGNMENT.PRFINISH as por_prfinish, (CASE WHEN PRASSIGNMENT.PRPENDESTSUM = 0 THEN 2 ELSE PRASSIGNMENT.PRSTATUS END) as assign_status, prj_resources.PRISROLE as v_is_role, prassignment.ROLE_ID as role_id, prtask.PRNAME as prname, inv_investments.CODE as project_id, srm_resources.RESOURCE_TYPE as v_resource_type, prtask.PREXTERNALID as prexternalid, (CASE WHEN SRM_RESOURCES.RESOURCE_TYPE &lt; 2 THEN (PRASSIGNMENT.PRESTSUM/3600) / PRJ_HPD_FACTOR_FCT()
        ELSE PRASSIGNMENT.PRESTSUM END) as por_prestsum, prtask.PRCATEGORY as prcategory, BASEREC.COST_SUM as baseline_cost, prassignment.prWDM as prwdm, prassignment.prStatus as prstatus, (CASE WHEN SRM_RESOURCES.RESOURCE_TYPE &lt; 2 THEN ((PRASSIGNMENT.PRACTSUM+PRASSIGNMENT.PRESTSUM)/3600) /
        PRJ_HPD_FACTOR_FCT()
        ELSE PRASSIGNMENT.PRACTSUM+PRASSIGNMENT.PRESTSUM
        END) as totaleffort, prtask.PRSHORTNAME as prshortname, prassignment.prPendFinish as prpendfinish, CREATED.FULL_NAME as created_by, prassignment.actcost_sum as actcost_sum, prtask.PRGUIDELINES as prguidelines, prassignment.prPendStart as prpendstart, CASE
            WHEN PRJ_RESOURCES.PRISROLE = 1 THEN 'ROLE'
            WHEN SRM_RESOURCES.DEFINED_TEAM_ID IS NOT NULL THEN 'TEAM'
            ELSE 'RESOURCE'
        END as staff_type, (CASE WHEN SRM_RESOURCES.RESOURCE_TYPE &lt; 2 THEN (PRASSIGNMENT.PRPENDACTSUM/3600) /
        PRJ_HPD_FACTOR_FCT() ELSE PRASSIGNMENT.PRPENDACTSUM END) as prpendactsum, BASEREC.START_DATE as baseline_start, UPDATED.FULL_NAME as updated_by, prassignment.prTaskID as odf_parent_id, (select t1.prname FROM ( select p.prname, p.prwbssequence seq
        from prtask p, prtask c
        where p.prprojectid = c.prprojectid
        and p.prwbssequence &lt; c.prwbssequence and p.wbs_nnbseq > c.prwbssequence
        and p.prwbslevel &lt; c.prwbslevel
        and p.wbs_parseq = -1
        and p.pristask = 0
        and p.prismilestone = 0
        and c.prid = prassignment.prtaskid ) t1
        inner join ( select min(p.prwbssequence) seq
        from prtask p, prtask c
        where p.prprojectid = c.prprojectid
        and p.prwbssequence &lt; c.prwbssequence and p.wbs_nnbseq > c.prwbssequence
        and p.prwbslevel &lt; c.prwbslevel
        and p.wbs_parseq = -1
        and p.pristask = 0
        and p.prismilestone = 0
        and c.prid = prassignment.prtaskid) t2
        on t1.seq = t2.seq) as phase_name, prtask.PRPROJECTID as v_project_id, prassignment.ETCCOST_SUM as etccost_sum, (CASE WHEN SRM_RESOURCES.RESOURCE_TYPE &lt; 2 THEN (PRASSIGNMENT.PRACTSUM/3600) / PRJ_HPD_FACTOR_FCT()
        ELSE PRASSIGNMENT.PRACTSUM END) as practsum, prassignment.prExtension as prextension, (NVL(PRTEAM.REQUIREMENT_NAME, SRM_RESOURCES.FULL_NAME)) as v_resource_name, prassignment.actcost_curve as actcost_curve, srm_resources.UNIQUE_NAME as v_resource_id, prtaskid.odf_period_end as odf_period_end, prtaskid.odf_period_type as odf_period_type, (select t1.prid FROM ( select p.prid, p.prwbssequence seq
        from prtask p, prtask c
        where p.prprojectid = c.prprojectid
        and p.prwbssequence &lt; c.prwbssequence and p.wbs_nnbseq > c.prwbssequence
        and p.prwbslevel &lt; c.prwbslevel
        and p.wbs_parseq = -1
        and p.pristask = 0
        and p.prismilestone = 0
        and c.prid = prassignment.prtaskid ) t1
        inner join ( select min(p.prwbssequence) seq
        from prtask p, prtask c
        where p.prprojectid = c.prprojectid
        and p.prwbssequence &lt; c.prwbssequence and p.wbs_nnbseq > c.prwbssequence
        and p.prwbslevel &lt; c.prwbslevel
        and p.wbs_parseq = -1
        and p.pristask = 0
        and p.prismilestone = 0
        and c.prid = prassignment.prtaskid) t2
        on t1.seq = t2.seq) as phase_id, prassignment.prEstMax as prestmax, inv_investments.currency_code as currency_code, prassignment.prUID as pruid, prtaskid.odf_period_start as odf_period_start, (CASE WHEN SRM_RESOURCES.RESOURCE_TYPE &lt; 2 THEN (PRASSIGNMENT.PRACTSUM/3600) / PRJ_HPD_FACTOR_FCT()
        ELSE PRASSIGNMENT.PRACTSUM END) as por_practsum, prtask.PRUSERTEXT1 as prusertext1, (CASE WHEN SRM_RESOURCES.RESOURCE_TYPE &lt; 2 THEN (BASEREC.USAGE_SUM/3600) / PRJ_HPD_FACTOR_FCT() ELSE
        BASEREC.USAGE_SUM END) as baseline_usage, PRASSIGNMENT.LAST_UPDATED_DATE as last_updated_date, inv_investments.IS_ACTIVE as project_active, prassignment.prEstPattern as prestpattern, prassignment.ETCCOST_CURVE as etccost_curve, (CASE WHEN SRM_RESOURCES.RESOURCE_TYPE &lt; 2 THEN (PRASSIGNMENT.PRESTSUM/3600) / PRJ_HPD_FACTOR_FCT()
        ELSE PRASSIGNMENT.PRESTSUM END) as prestsum, prassignment.prTaskID as prtaskid, NVL(PRASSIGNMENT.PRSTART, CASE WHEN PRTASK.PRFINISH &lt; PRASSIGNMENT.PRACTTHRU THEN PRTASK.PRFINISH ELSE CASE
        WHEN PRTASK.PRSTART &lt; PRASSIGNMENT.PRACTTHRU THEN PRASSIGNMENT.PRACTTHRU ELSE PRTASK.PRSTART END END) as prstart, (select t1.prexternalid FROM ( select p.prexternalid, p.prwbssequence seq
        from prtask p, prtask c
        where p.prprojectid = c.prprojectid
        and p.prwbssequence &lt; c.prwbssequence and p.wbs_nnbseq > c.prwbssequence
        and p.prwbslevel &lt; c.prwbslevel
        and p.wbs_parseq = -1
        and p.pristask = 0
        and p.prismilestone = 0
        and c.prid = prassignment.prtaskid ) t1
        inner join ( select min(p.prwbssequence) seq
        from prtask p, prtask c
        where p.prprojectid = c.prprojectid
        and p.prwbssequence &lt; c.prwbssequence and p.wbs_nnbseq > c.prwbssequence
        and p.prwbslevel &lt; c.prwbslevel
        and p.wbs_parseq = -1
        and p.pristask = 0
        and p.prismilestone = 0
        and c.prid = prassignment.prtaskid) t2
        on t1.seq = t2.seq) as phase_xid, prassignment.prResourceID as prresourceid, prtask.PRPCTCOMPLETE as prpctcomplete, (CASE WHEN SRM_RESOURCES.RESOURCE_TYPE &lt; 2 THEN (PRASSIGNMENT.PRPENDESTSUM/3600) /
        PRJ_HPD_FACTOR_FCT() ELSE PRASSIGNMENT.PRPENDESTSUM END) as prpendestsum, (SELECT M.FULL_NAME FROM SRM_RESOURCES M WHERE M.USER_ID = INV_INVESTMENTS.MANAGER_ID) as proj_manager_name, prtask.PRISMILESTONE as prismilestone, PRASSIGNMENT.CREATED_DATE as created_date, odf_ca_assignment.partition_code as partition_code, prassignment.prActThru as practthru, srm_resources.IS_ACTIVE as res_active, prtaskid.odf_entity_code as odf_entity_code, prtaskid.prprojectid as odf_grand_parent_id  from prassignment prassignment JOIN srm_resources CREATED ON CREATED.user_id=prassignment.created_by JOIN srm_resources UPDATED ON UPDATED.user_id=prassignment.last_updated_by JOIN prtask prtask ON prtask.prid=prassignment.prtaskid JOIN prteam prteam ON prteam.prid=prassignment.team_id JOIN srm_resources srm_resources ON srm_resources.id=prassignment.prresourceid JOIN prj_resources prj_resources ON prj_resources.prid=prassignment.prresourceid JOIN inv_investments inv_investments ON inv_investments.id=PRTASK.prprojectid LEFT OUTER JOIN prj_baseline_details BASEREC ON BASEREC.OBJECT_ID = PRASSIGNMENT.PRID AND BASEREC.OBJECT_TYPE='ASSIGNMENT' and BASEREC.IS_CURRENT = 1 JOIN odf_ca_assignment odf_ca_assignment ON odf_ca_assignment.id=prassignment.prid JOIN (select   'x' pmd_analytical_partition_by, prtask.prid odf_pk, prprojectid.odf_period_type as odf_period_type, prprojectid.odf_period_start as odf_period_start, prprojectid.entity as odf_entity_code, prtask.prProjectID as prprojectid, prprojectid.odf_period_end as odf_period_end from prtask prtask JOIN (select odf_inv.odf_pk,odf_inv.entity,odf_inv.odf_period_end,odf_inv.odf_period_start,odf_inv.odf_period_type,odf_project.agl_id from (select   'x' pmd_analytical_partition_by, inv_investments.id odf_pk, odf_ca_inv.odf_period_type as odf_period_type, odf_ca_inv.odf_period_start as odf_period_start, inv_investments.entity_code as entity, odf_ca_inv.odf_period_end as odf_period_end from inv_investments inv_investments JOIN odf_ca_inv odf_ca_inv ON odf_ca_inv.id=inv_investments.id where 1 = 1 ) odf_inv left outer join (select   'x' pmd_analytical_partition_by, inv_investments.id odf_pk, odf_ca_project.agl_id as agl_id from inv_investments inv_investments JOIN pac_mnt_projects PAC_MNT_PROJECTS ON PAC_MNT_PROJECTS.id=inv_investments.id join odf_object_instance_mapping oim1 on inv_investments.id = oim1.primary_object_instance_id  and oim1.primary_object_instance_code='project' join fin_financials fin_financials on oim1.secondary_object_instance_id = fin_financials.id and oim1.secondary_object_instance_code='financials' JOIN odf_ca_financials odf_ca_financials ON odf_ca_financials.id=FIN_FINANCIALS.id JOIN odf_ca_project odf_ca_project ON odf_ca_project.id=inv_investments.id where 1 = 1 ) odf_project on odf_inv.odf_pk = odf_project.odf_pk )  prprojectid ON prprojectid.odf_pk=prtask.prProjectID where 1 = 1 )  prtaskid ON prtaskid.odf_pk=prassignment.prTaskID  where 1 = 1</text>
  </QueryResult>
</ClarityDBViewQuery>
