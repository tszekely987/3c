<ClarityDBViewQuery>
  <QueryResult code="ODF_COSTPLANDETAIL_V2">
    <indexes/>
    <text_length>4988</text_length>
    <text>select   'x' pmd_analytical_partition_by, fin_cost_plan_details.id odf_pk, fin_cost_plan_details.UNITS_ACTUAL as units_actual, fin_cost_plan_details.TOTAL_COST as total_cost, fin_cost_plan_details.REVENUE_VARIANCE as revenue_variance, fin_cost_plan_details.TRANSACTION_CLASS_ID as transaction_class_id, plan_id.end_period_id as period_finish_id, fin_cost_plan_details.TOTAL_BILLING_REVENUE as total_bill_revenue, fin_cost_plan_details.INPUT_TYPE_CODE_ID as input_type_code_id, fin_cost_plan_details.SOURCE as source, plan_id.inv_name as inv_name, fin_cost_plan_details.LOCATION_ID as location_id, fin_cost_plan_details.REVENUE as revenue, fin_cost_plan_details.ROLE_ID as role_id, PERIOD_START_DATE.start_date as period_start, fin_cost_plan_details.PERCENTAGE as percentage, fin_cost_plan_details.budget_detail_id as budget_detail_id, fin_cost_plan_details.TOTAL_UNITS as total_units, fin_cost_plan_details.LOV1_ID as lov1_id, fin_cost_plan_details.GL_ACCOUNT_ID as gl_account, plan_id.bill_currency_code as bill_currency_code, fin_cost_plan_details.BILLING_REVENUE as bill_revenue, (SELECT count(1) FROM DUAL WHERE EXISTS (SELECT 1 FROM FIN_COST_PLAN_DETAILS d where d.PARENT_DETAIL_ID = FIN_COST_PLAN_DETAILS.ID)) as has_children, plan_id.start_period_id as period_start_id, (NVL((SELECT 1 FROM DUAL WHERE EXISTS (SELECT 1 from NMC_CONVERSATIONS TC WHERE TC.RESOURCE_NAME='costplandetail' AND TC.RESOURCE_ID = fin_cost_plan_details.id)), 0)) as has_conversations, PERIOD_END_DATE.end_date as period_finish, fin_cost_plan_details.FORECAST as forecast, fin_cost_plan_details.RESOURCE_CLASS_ID as resource_class_id, plan_id.entity_id as entity_id, CREATED.FULL_NAME as created_by, fin_cost_plan_details.TOTAL_UNITS_VARIANCE as total_units_variance, fin_cost_plan_details.TOTAL_BILLING_COST as total_bill_cost, UPDATED.FULL_NAME as updated_by, fin_cost_plan_details.FORECAST_VARIANCE as forecast_variance, fin_cost_plan_details.LOV2_ID as lov2_id, fin_cost_plan_details.COST_VARIANCE as cost_variance, plan_id.period_type_code as period_type, fin_cost_plan_details.CHARGE_CODE_ID as charge_code_id, fin_cost_plan_details.DESCRIPTION as description, fin_cost_plan_details.TOTAL_COST_ACTUAL as total_cost_actual, fin_cost_plan_details.UNITS as units, fin_cost_plan_details.REVENUE_ACTUAL as revenue_actual, (SELECT CASE WHEN count(conv.id) > 0 THEN 1 ELSE 0 END FROM NMC_CONVERSATIONS conv WHERE conv.RESOURCE_NAME = 'costplandetail' AND conv.RESOURCE_ID = FIN_COST_PLAN_DETAILS.ID) as has_conversation, plan_id.currency_code as currency_code, fin_cost_plan_details.UNITS_VARIANCE as units_variance, fin_cost_plan_details.TOTAL_COST_VARIANCE as total_cost_variance, FIN_PLANS.OBJECT_ID as inv_id, FIN_COST_PLAN_DETAILS.last_updated_date as last_updated_date, fin_cost_plan_details.COST_TYPE_ID as cost_type_id, fin_cost_plan_details.COST as cost, fin_cost_plan_details.DEPARTMENT_ID as department_id, fin_cost_plan_details.BILLING_COST as bill_cost, fin_cost_plan_details.TOTAL_REVENUE_ACTUAL as total_revenue_actual, fin_cost_plan_details.TOTAL_REVENUE_VARIANCE as total_revenue_var, fin_cost_plan_details.COST_ACTUAL as cost_actual, fin_cost_plan_details.PARENT_DETAIL_ID as parent_detail_id, fin_cost_plan_details.TOTAL_UNITS_ACTUAL as total_units_actual, plan_id.inv_code as inv_code, fin_cost_plan_details.TOTAL_REVENUE as total_revenue, fin_cost_plan_details.RESOURCE_ID as resource_id, FIN_COST_PLAN_DETAILS.created_date as created_date, odf_ca_costplandetail.partition_code as partition_code, fin_cost_plan_details.PLAN_ID as plan_id, plan_id.entity as entity  from fin_cost_plan_details fin_cost_plan_details JOIN fin_plans FIN_PLANS ON FIN_PLANS.id=FIN_COST_PLAN_DETAILS.plan_id LEFT OUTER JOIN biz_com_periods PERIOD_START_DATE ON PERIOD_START_DATE.period_type = FIN_PLANS.period_type_code and PERIOD_START_DATE.id = FIN_PLANS.start_period_id LEFT OUTER JOIN biz_com_periods PERIOD_END_DATE ON PERIOD_END_DATE.period_type = FIN_PLANS.period_type_code and PERIOD_END_DATE.id = FIN_PLANS.end_period_id JOIN srm_resources CREATED ON CREATED.user_id=FIN_COST_PLAN_DETAILS.created_by JOIN srm_resources UPDATED ON UPDATED.user_id=FIN_COST_PLAN_DETAILS.last_updated_by JOIN odf_ca_costplandetail odf_ca_costplandetail ON odf_ca_costplandetail.id=fin_cost_plan_details.id JOIN (select   'x' pmd_analytical_partition_by, fin_plans.id odf_pk, fin_plans.START_PERIOD_ID as start_period_id, INVESTMENTS.NAME as inv_name, ENTITY.HOME_CURRENCY_CODE as currency_code, fin_plans.END_PERIOD_ID as end_period_id, PROJECTS.BILLING_CURRENCY_CODE as bill_currency_code, ENTITY.ID as entity_id, INVESTMENTS.CODE as inv_code, fin_plans.PERIOD_TYPE_CODE as period_type_code, ENTITY.ENTITY as entity from fin_plans fin_plans JOIN inv_investments INVESTMENTS ON INVESTMENTS.id=FIN_PLANS.object_id JOIN pac_mnt_projects PROJECTS ON PROJECTS.id=FIN_PLANS.object_id JOIN entity ENTITY ON ENTITY.entity=INVESTMENTS.entity_code where 1 = 1 )  plan_id ON plan_id.odf_pk=fin_cost_plan_details.PLAN_ID  where 1 = 1</text>
  </QueryResult>
</ClarityDBViewQuery>
