<ClarityDBViewQuery>
  <QueryResult code="ODF_COP_PRJ_STATUSRPT_V2">
    <indexes/>
    <text_length>5509</text_length>
    <text>select   'x' pmd_analytical_partition_by, odf_ca_cop_prj_statusrpt.id odf_pk, odf_ca_cop_prj_statusrpt.code as code, (SELECT 1 AS COP_IS_LATEST FROM DUAL WHERE ODF_CA_COP_PRJ_STATUSRPT.ID = (SELECT ID FROM (SELECT R.ID, ROW_NUMBER() OVER (PARTITION BY R.ODF_PARENT_ID ORDER BY R.COP_REPORT_DATE DESC, R.ID DESC) AS REPORT_ORDER FROM ODF_CA_COP_PRJ_STATUSRPT R WHERE ODF_CA_COP_PRJ_STATUSRPT.ODF_PARENT_ID = R.ODF_PARENT_ID AND R.COP_REPORT_STATUS = 'FINAL' ) LATEST_REPORT WHERE LATEST_REPORT.REPORT_ORDER = 1)) as cop_is_latest, (nvl((odf_ca_cop_prj_statusrpt.cop_schedule_status*1),0)+nvl((odf_ca_cop_prj_statusrpt.cop_scope_status*1),0)+nvl((odf_ca_cop_prj_statusrpt.cop_cost_eft_status*1),0)) as cop_overall_status, odf_parent_id.odf_period_end as odf_period_end, odf_parent_id.odf_period_type as odf_period_type, odf_ca_cop_prj_statusrpt.cop_schedule_status as cop_schedule_status, odf_ca_cop_prj_statusrpt.cop_pdf_file as cop_pdf_file, odf_ca_cop_prj_statusrpt.cop_phase as cop_phase, odf_parent_id.schedule_start as inv_start, odf_ca_cop_prj_statusrpt.cop_scope_change as cop_scope_change, odf_parent_id.odf_period_start as odf_period_start, odf_ca_cop_prj_statusrpt.cop_scope_obj as cop_scope_obj, odf_ca_cop_prj_statusrpt.cop_report_date as cop_report_date, odf_ca_cop_prj_statusrpt.cop_scope_status as cop_scope_status, odf_ca_cop_prj_statusrpt.last_updated_date as last_updated_date, odf_parent_id.unique_code as cop_project_id, (CASE WHEN odf_ca_cop_prj_statusrpt.odf_parent_id = (SELECT ID FROM INV_INVESTMENTS INV WHERE ODF_OBJECT_CODE = 'project' AND ID = odf_ca_cop_prj_statusrpt.odf_parent_id) THEN  odf_ca_cop_prj_statusrpt.odf_parent_id ELSE NULL END) as projectid, odf_ca_cop_prj_statusrpt.cop_key_accomplish as cop_key_accomplish, odf_ca_cop_prj_statusrpt.cop_effort_exp as cop_effort_exp, odf_ca_cop_prj_statusrpt.cop_upcoming_act as cop_upcoming_act, odf_ca_cop_prj_statusrpt.cop_cost_eft_status as cop_cost_eft_status, (select audit_tmplt_created.full_name from (select full_name, user_id from srm_resources) audit_tmplt_created where audit_tmplt_created.user_id = odf_ca_cop_prj_statusrpt.created_by) as created_by, odf_ca_cop_prj_statusrpt.clr_status_narrative as clr_status_narrative, odf_ca_cop_prj_statusrpt.cop_schedule_exp as cop_schedule_exp, odf_ca_cop_prj_statusrpt.cop_scope_deliver as cop_scope_deliver, odf_ca_cop_prj_statusrpt.cop_cost_effort_rev as cop_cost_effort_rev, odf_ca_cop_prj_statusrpt.cop_cost_effort_ext as cop_cost_effort_ext, odf_ca_cop_prj_statusrpt.cop_report_status as cop_report_status, odf_ca_cop_prj_statusrpt.cop_sched_milestone as cop_sched_milestone, odf_ca_cop_prj_statusrpt.cop_scope_exp as cop_scope_exp, (select audit_tmplt_updated.full_name from (select full_name, user_id from srm_resources) audit_tmplt_updated where audit_tmplt_updated.user_id = odf_ca_cop_prj_statusrpt.last_updated_by) as updated_by, odf_parent_id.manager_id as cop_project_manager, odf_ca_cop_prj_statusrpt.name as name, odf_ca_cop_prj_statusrpt.cop_cost_eft_staff as cop_cost_eft_staff, odf_ca_cop_prj_statusrpt.odf_parent_id as odf_parent_id, odf_ca_cop_prj_statusrpt.cop_report_update as cop_report_update, odf_parent_id.risk as prjrisk, odf_ca_cop_prj_statusrpt.created_date as created_date, odf_ca_cop_prj_statusrpt.partition_code as partition_code, odf_parent_id.name as cop_project_name, odf_ca_cop_prj_statusrpt.odf_cncrt_parent_id as odf_cncrt_parent_id, odf_parent_id.entity as odf_entity_code  from odf_ca_cop_prj_statusrpt odf_ca_cop_prj_statusrpt JOIN (select odf_inv.odf_pk,odf_inv.unique_code,odf_inv.manager_id,odf_inv.name,odf_inv.schedule_start,odf_project.entity,odf_project.odf_period_end,odf_project.odf_period_start,odf_project.odf_period_type,odf_project.risk from (select   'x' pmd_analytical_partition_by, inv_investments.id odf_pk, inv_investments.code as unique_code, inv_investments.MANAGER_ID as manager_id, inv_investments.schedule_start as schedule_start, inv_investments.name as name from inv_investments inv_investments where 1 = 1 ) odf_inv left outer join (select   'x' pmd_analytical_partition_by, inv_investments.id odf_pk, inv_investments.entity_code as entity, odf_ca_inv.odf_period_type as odf_period_type, odf_ca_inv.odf_period_start as odf_period_start, (inv_projects.RCF_FLEXIBILITY * 1 + inv_projects.RCF_FUNDING * 1 + inv_projects.RCF_HUMAN_INTERFACE * 1 + inv_projects.RCF_IMPLEMENTATION * 1 + inv_projects.RCF_INTERDEPENDENCY * 1 + inv_projects.RCF_OBJECTIVES * 1 + inv_projects.RCF_ORG_CULTURE * 1 + inv_projects.RCF_RESOURCE_AVAIL * 1 + inv_projects.RCF_SPONSORSHIP * 1 + inv_projects.RCF_SUPPORTABILITY * 1 + inv_projects.RCF_TECHNICAL * 1) / (1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1) as risk, odf_ca_inv.odf_period_end as odf_period_end from inv_investments inv_investments JOIN pac_mnt_projects PAC_MNT_PROJECTS ON PAC_MNT_PROJECTS.id=inv_investments.id JOIN inv_projects inv_projects ON inv_projects.prid=inv_investments.id JOIN odf_ca_inv odf_ca_inv ON odf_ca_inv.id=inv_investments.id join odf_object_instance_mapping oim1 on inv_investments.id = oim1.primary_object_instance_id  and oim1.primary_object_instance_code='project' join fin_financials fin_financials on oim1.secondary_object_instance_id = fin_financials.id and oim1.secondary_object_instance_code='financials' JOIN odf_ca_financials odf_ca_financials ON odf_ca_financials.id=FIN_FINANCIALS.id  where 1 = 1) odf_project on odf_inv.odf_pk = odf_project.odf_pk )  odf_parent_id ON odf_parent_id.odf_pk=odf_ca_cop_prj_statusrpt.odf_parent_id  where 1 = 1</text>
  </QueryResult>
</ClarityDBViewQuery>
