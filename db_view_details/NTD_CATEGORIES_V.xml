<ClarityDBViewQuery>
  <QueryResult code="NTD_CATEGORIES_V">
    <indexes/>
    <text_length>2743</text_length>
    <text>SELECT
  NTD_CATEGORIES.CATEGORY_ID,
  NTD_CATEGORIES.LABEL,
  NTD_CATEGORIES.DESCRIPTION,
  NTD_CATEGORIES.GROUP_ID_OWNERS,
  NTD_CATEGORIES.OBJECT_TYPE_ID,
  NTD_CATEGORIES.OBJECT_ID,
  ASSGNPERM.PRINCIPAL_ID
FROM
  CMN_SEC_USERS U1,
  NTD_CATEGORIES,
  CMN_SEC_ASSGND_OBJ_PERM ASSGNPERM
WHERE
         NTD_CATEGORIES.CATEGORY_ID = ASSGNPERM.OBJECT_INSTANCE_ID
AND      ASSGNPERM.OBJECT_ID = 401
AND      ASSGNPERM.PERMISSION_ID = 1
AND	 ASSGNPERM.PRINCIPAL_TYPE = 'USER'
AND	 ASSGNPERM.PRINCIPAL_ID = U1.ID
UNION
SELECT
  NTD_CATEGORIES.CATEGORY_ID,
  NTD_CATEGORIES.LABEL,
  NTD_CATEGORIES.DESCRIPTION,
  NTD_CATEGORIES.GROUP_ID_OWNERS,
  NTD_CATEGORIES.OBJECT_TYPE_ID,
  NTD_CATEGORIES.OBJECT_ID,
  ASSGNPERM.PRINCIPAL_ID
FROM
  CMN_SEC_USERS U1,
  NTD_CATEGORIES,
  CMN_SEC_ASSGND_OBJ_PERM ASSGNPERM
WHERE
         NTD_CATEGORIES.CATEGORY_ID = ASSGNPERM.OBJECT_INSTANCE_ID
AND      ASSGNPERM.OBJECT_ID = 401
AND      ASSGNPERM.PERMISSION_ID = 5
AND	 ASSGNPERM.PRINCIPAL_TYPE = 'USER'
AND	 ASSGNPERM.PRINCIPAL_ID = U1.ID
UNION
SELECT
  NTD_CATEGORIES.CATEGORY_ID,
  NTD_CATEGORIES.LABEL,
  NTD_CATEGORIES.DESCRIPTION,
  NTD_CATEGORIES.GROUP_ID_OWNERS,
  NTD_CATEGORIES.OBJECT_TYPE_ID,
  NTD_CATEGORIES.OBJECT_ID,
  UG.USER_ID USER_ID
FROM     CMN_SEC_USERS U1,
         CMN_SEC_USER_GROUPS UG,
         CMN_SEC_GROUPS PARENT_GROUP,
         CMN_SEC_GROUPS G,
	 CMN_SEC_GROUP_FLAT_HIERS H,
         NTD_CATEGORIES,
         CMN_SEC_ASSGND_OBJ_PERM ASSGNPERM
WHERE    NTD_CATEGORIES.CATEGORY_ID = ASSGNPERM.OBJECT_INSTANCE_ID
AND      ASSGNPERM.OBJECT_ID = 401
AND      ASSGNPERM.PERMISSION_ID = 1
AND	 ASSGNPERM.PRINCIPAL_TYPE = 'GROUP'
AND	 ASSGNPERM.PRINCIPAL_ID = H.PARENT_GROUP_ID
AND      UG.GROUP_ID = H.GROUP_ID
AND      H.GROUP_ID = G.ID
AND      G.IS_ACTIVE = 1
AND      H.PARENT_GROUP_ID = PARENT_GROUP.ID
AND      PARENT_GROUP.IS_ACTIVE = 1
AND	 UG.USER_ID = U1.ID
UNION
SELECT
  NTD_CATEGORIES.CATEGORY_ID,
  NTD_CATEGORIES.LABEL,
  NTD_CATEGORIES.DESCRIPTION,
  NTD_CATEGORIES.GROUP_ID_OWNERS,
  NTD_CATEGORIES.OBJECT_TYPE_ID,
  NTD_CATEGORIES.OBJECT_ID,
  UG.USER_ID USER_ID
FROM     CMN_SEC_USERS U1,
         CMN_SEC_USER_GROUPS UG,
         CMN_SEC_GROUPS PARENT_GROUP,
         CMN_SEC_GROUPS G,
	 CMN_SEC_GROUP_FLAT_HIERS H,
         NTD_CATEGORIES,
         CMN_SEC_ASSGND_OBJ_PERM ASSGNPERM
WHERE    NTD_CATEGORIES.CATEGORY_ID = ASSGNPERM.OBJECT_INSTANCE_ID
AND      ASSGNPERM.OBJECT_ID = 401
AND      ASSGNPERM.PERMISSION_ID = 5
AND	 ASSGNPERM.PRINCIPAL_TYPE = 'GROUP'
AND	 ASSGNPERM.PRINCIPAL_ID = H.PARENT_GROUP_ID
AND      UG.GROUP_ID = H.GROUP_ID
AND      H.GROUP_ID = G.ID
AND      G.IS_ACTIVE = 1
AND      H.PARENT_GROUP_ID = PARENT_GROUP.ID
AND      PARENT_GROUP.IS_ACTIVE = 1
AND	 UG.USER_ID = U1.ID
 
 
 
 
 </text>
  </QueryResult>
</ClarityDBViewQuery>
