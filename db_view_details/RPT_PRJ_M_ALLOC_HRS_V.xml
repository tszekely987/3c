<ClarityDBViewQuery>
  <QueryResult code="RPT_PRJ_M_ALLOC_HRS_V">
    <indexes/>
    <text_length>1184</text_length>
    <text>SELECT t.prProjectID PROJECT_ID,
       t.prID TEAM_ID, 
       s.slice_date MONTH_START_DATE,
       SUM(NVL(CASE WHEN sr.request_name = 'MONTHLYRESOURCEALLOCCURVE' THEN
              (CASE WHEN r.resource_type = 0 THEN s.slice ELSE 0 END) ELSE 0 END,0)) ALLOC_L_HOURS,
       SUM(NVL(CASE WHEN sr.request_name = 'MONTHLYRESOURCEALLOCCURVE' THEN
              (CASE WHEN r.resource_type = 1 THEN s.slice ELSE 0 END) ELSE 0 END,0)) ALLOC_Q_HOURS,
       SUM(NVL(CASE WHEN sr.request_name = 'MONTHLYRESOURCEHARDALLOC' THEN
              (CASE WHEN r.resource_type = 0 THEN s.slice ELSE 0 END) ELSE 0 END,0)) HARD_ALLOC_L_HOURS,
       SUM(NVL(CASE WHEN sr.request_name = 'MONTHLYRESOURCEHARDALLOC' THEN
              (CASE WHEN r.resource_type = 1 THEN s.slice ELSE 0 END) ELSE 0 END,0)) HARD_ALLOC_Q_HOURS
FROM   prTeam t
       INNER JOIN srm_resources r ON t.prResourceID = r.id
       INNER JOIN prj_blb_slices s ON t.prID = s.prj_object_id
       INNER JOIN prj_blb_slicerequests sr ON s.slice_request_id = sr.id
WHERE (sr.request_name IN ('MONTHLYRESOURCEALLOCCURVE','MONTHLYRESOURCEHARDALLOC'))
AND   (r.resource_type &lt;= 1)
GROUP BY t.prProjectID, t.prID, s.slice_date
 
 
 
 
 </text>
  </QueryResult>
</ClarityDBViewQuery>
