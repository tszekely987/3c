<ClarityDBViewQuery>
  <QueryResult code="ODF_RDM_ROADMAP_ITEM_V2">
    <indexes/>
    <text_length>14026</text_length>
    <text>select   'x' pmd_analytical_partition_by, rdm_roadmap_items.id odf_pk, odf_ca_rdm_roadmap_item.qa_alloc as qa_alloc, rdm_roadmap_items.FCST_CAP_COST_TSV as fcst_cst_cap_tsv, (SELECT COUNT(1) FROM DUAL WHERE EXISTS (SELECT 1 FROM CMN_DEPENDENCIES WHERE ( FROM_OBJECT_CODE = 'rdm_roadmap_item' AND TO_OBJECT_CODE =
        'rdm_roadmap_item' ) AND ( FROM_OBJECT_ID = RDM_ROADMAP_ITEMS.ID OR TO_OBJECT_ID = RDM_ROADMAP_ITEMS.ID ))) as has_dependencies, NVL(RDM_ROADMAP_ITEMS.CAPITAL_COST, 0)+NVL(RDM_ROADMAP_ITEMS.OPERATING_COST, 0) as total_cost, odf_ca_rdm_roadmap_item.prod_mark_alloc as prod_mark_alloc, (SELECT COUNT(1) FROM DUAL WHERE EXISTS (SELECT 1 FROM odf_multi_valued_lookups WHERE object = 'odf_agreement' AND attribute IN (
        'successors' , 'predecessors' ) AND value = CONCAT(CONCAT(INV_INVESTMENTS.ODF_OBJECT_CODE,':'),RDM_ROADMAP_ITEMS.linked_internal_id))) as has_agreements, odf_ca_rdm_roadmap_item.vsm_agl_value_score as vsm_agl_value_score, odf_ca_rdm_roadmap_item.obj_objective as obj_objective, rank() over (order by SORTORDER.SORT_ORDER) as odf_order, rdm_roadmap_items.TYPE as type, odf_ca_rdm_roadmap_item.clr_cofund_currency as clr_cofund_currency, odf_ca_rdm_roadmap_item.vsm_agl_inv_cat as vsm_agl_inv_cat, rdm_roadmap_items.BENEFIT_TSV as benefit_tsv, rdm_roadmap_items.CAPITAL_COST_CLIPPED as cap_cost_clp, rdm_roadmap_items.ACTUAL_CAPITAL_COST_CLIPPED as actual_cap_cost_clp, (NVL(RDM_ROADMAP_ITEMS.CAPITAL_COST_CLIPPED, 0)+NVL(RDM_ROADMAP_ITEMS.OPERATING_COST_CLIPPED, 0))-(NVL(RDM_ROADMAP_ITEMS.ACTUAL_CAPITAL_COST_CLIPPED, 0)+NVL(RDM_ROADMAP_ITEMS.ACTUAL_OPERATING_COST_CLIPPED, 0)) as tot_remain_cost_clp, rdm_roadmap_items.RANK as rank, rdm_roadmap_items.STATUS_INDICATOR as status_indicator, odf_ca_rdm_roadmap_item.vsm_tshirt_storypts as vsm_tshirt_storypts, INV_INVESTMENTS.NAME as linked_to, rdm_roadmap_items.BUDGET_OP_COST as budget_cost_op, NVL(RDM_ROADMAP_ITEMS.CAPACITY, 0)-NVL(RDM_ROADMAP_ITEMS.ACTUAL, 0) as remain_capacity, rdm_roadmap_items.FCST_CAP_COST as fcst_cst_cap, rdm_roadmap_items.ACTUAL_OPERATING_COST_TSV as actual_op_cost_tsv, rdm_roadmap_items.BENEFIT as benefit, odf_ca_rdm_roadmap_item.bus_anlst_alloc as bus_anlst_alloc, rdm_roadmap_items.OPERATING_COST as op_cost, odf_ca_rdm_roadmap_item.clr_cofund as clr_cofund, odf_ca_rdm_roadmap_item.obj_pfl_category1 as obj_pfl_category1, odf_ca_rdm_roadmap_item.obj_pfl_category2 as obj_pfl_category2, odf_ca_rdm_roadmap_item.obj_pfl_category3 as obj_pfl_category3, rdm_roadmap_items.OPERATING_COST_CLIPPED as op_cost_clp, odf_ca_rdm_roadmap_item.obj_pfl_category4 as obj_pfl_category4, UPDATED.FULL_NAME as updated_by, rdm_roadmap_items.STAGE_CODE as stage_code, odf_ca_rdm_roadmap_item.obj_align_factor2 as obj_align_factor2, odf_ca_rdm_roadmap_item.obj_align_factor1 as obj_align_factor1, (
          SELECT LISTAGG( value , ', ') WITHIN GROUP (ORDER BY value)  FROM
          (

            select  omvl2.value
            from
            odf_multi_valued_lookups omvl
            inner join 	inv_investments inv on inv.ODF_OBJECT_CODE || ':' || inv.id = omvl.value and omvl.object = 'odf_agreement'
            and omvl.attribute = 'successors'
            inner join rdm_roadmap_items rmi on rmi.linked_internal_id = inv.id
            inner join odf_multi_valued_lookups omvl2 on omvl2.pk_id = omvl.pk_id and omvl2.object = 'odf_agreement' and omvl2.attribute = 'predecessors'
            where
            rmi.id = RDM_ROADMAP_ITEMS.ID
            FETCH NEXT 25 ROWS ONLY
          )
        ) as agmntpredecessors, odf_ca_rdm_roadmap_item.obj_align_factor4 as obj_align_factor4, odf_ca_rdm_roadmap_item.obj_align_factor3 as obj_align_factor3, odf_ca_rdm_roadmap_item.obj_align_factor6 as obj_align_factor6, odf_ca_rdm_roadmap_item.obj_align_factor5 as obj_align_factor5, odf_ca_rdm_roadmap_item.prj_mgr_alloc as prj_mgr_alloc, rdm_roadmap_items.STATUS as status, odf_ca_rdm_roadmap_item.clr_t_shirt as clr_t_shirt, odf_ca_rdm_roadmap_item.vsm_agl_release as vsm_agl_release, rdm_roadmap_items.BENEFIT_CLIPPED as benefit_clp, rdm_roadmap_items.LAST_SYNCED_DATE as last_synced_date, roadmap_id.odf_period_type as odf_period_type, (
						SELECT LISTAGG( name , ', ') WITHIN GROUP (ORDER BY name)  FROM 
						(
						      SELECT rmi.name name
			            FROM CMN_DEPENDENCIES rd
			            INNER JOIN  RDM_ROADMAP_ITEMS rmi ON rmi.id = rd.TO_OBJECT_ID
			            AND rd.FROM_OBJECT_CODE = 'rdm_roadmap_item'
			            AND rd.TO_OBJECT_CODE = 'rdm_roadmap_item'
			            AND rd.FROM_OBJECT_ID = RDM_ROADMAP_ITEMS.ID
			            ORDER BY rmi.name
			            FETCH NEXT 25 ROWS ONLY 
						)
          ) as successors, rdm_roadmap_items.FCST_OP_COST as fcst_cst_op, odf_ca_rdm_roadmap_item.vsm_strategic_theme as vsm_strategic_theme, rdm_roadmap_items.CURRENCY_CODE as currency_code, rdm_roadmap_items.CAPACITY as capacity, roadmap_id.odf_period_start as odf_period_start, odf_ca_rdm_roadmap_item.obj_request_category as obj_request_category, odf_ca_rdm_roadmap_item.obj_request_type as obj_request_type, rdm_roadmap_items.MANAGER_ID as manager_id, odf_ca_rdm_roadmap_item.vsm_delivery as vsm_delivery, odf_ca_rdm_roadmap_item.vsm_value_stream as vsm_value_stream, rdm_roadmap_items.START_DATE as start_date, odf_ca_rdm_roadmap_item.vsm_acp_userstory as vsm_acp_userstory, NVL(RDM_ROADMAP_ITEMS.CAPITAL_COST, 0)-NVL(RDM_ROADMAP_ITEMS.ACTUAL_CAPITAL_COST, 0) as remain_cap_cost, odf_ca_rdm_roadmap_item.vsm_pctdon_storyct as vsm_pctdon_storyct, rdm_roadmap_items.OPERATING_COST_TSV as op_cost_tsv, rdm_roadmap_items.CAPACITY_TSV as capacity_tsv, rdm_roadmap_items.IRR as irr, odf_ca_rdm_roadmap_item.anlst_rel_alloc as anlst_rel_alloc, (NVL(RDM_ROADMAP_ITEMS.CAPITAL_COST, 0)+NVL(RDM_ROADMAP_ITEMS.OPERATING_COST, 0))-(NVL(RDM_ROADMAP_ITEMS.ACTUAL_CAPITAL_COST, 0)+NVL(RDM_ROADMAP_ITEMS.ACTUAL_OPERATING_COST, 0)) as tot_remain_cost, INV_INVESTMENTS.ODF_OBJECT_CODE as linked_to_obj_code, NVL(RDM_ROADMAP_ITEMS.ACTUAL_CAPITAL_COST, 0)+NVL(RDM_ROADMAP_ITEMS.ACTUAL_OPERATING_COST, 0) as total_act_cost, odf_ca_rdm_roadmap_item.vsm_acp_storypts as vsm_acp_storypts, rdm_roadmap_items.DEPARTCODE as department_code, odf_ca_rdm_roadmap_item.prod_mgr_alloc as prod_mgr_alloc, (
            SELECT LISTAGG( name , ', ') WITHIN GROUP (ORDER BY name)  FROM 
            (
	            SELECT rmi.name name  
	            FROM CMN_DEPENDENCIES rd 
	            INNER JOIN  RDM_ROADMAP_ITEMS rmi ON rmi.id = rd.FROM_OBJECT_ID 
	            AND rd.FROM_OBJECT_CODE = 'rdm_roadmap_item'
	            AND rd.TO_OBJECT_CODE = 'rdm_roadmap_item'
	            AND rd.TO_OBJECT_ID = RDM_ROADMAP_ITEMS.ID
	            ORDER BY rmi.name
	            FETCH NEXT 25 ROWS ONLY
            )
          ) as predecessors, rdm_roadmap_items.GOAL_CODE as goal_code, rdm_roadmap_items.BUDGET_CAP_COST as budget_cost_cap, odf_ca_rdm_roadmap_item.vsm_inv_horizon as vsm_inv_horizon, odf_ca_rdm_roadmap_item.vsm_agl_plan_finish as vsm_agl_plan_finish, odf_ca_rdm_roadmap_item.vsm_capacity_type as vsm_capacity_type, rdm_roadmap_items.SCENARIO_ID as scenario_id, odf_ca_rdm_roadmap_item.agl_wsjf_score as agl_wsjf_score, rdm_roadmap_items.INV_STATUS as inv_status, rdm_roadmap_items.IN_PLAN as in_plan, NVL(RDM_ROADMAP_ITEMS.ACTUAL_CAPITAL_COST_CLIPPED, 0)+NVL(RDM_ROADMAP_ITEMS.ACTUAL_OPERATING_COST_CLIPPED, 0) as total_act_cost_clp, SORTORDER.SORT_ORDER as odf_sort_order, rdm_roadmap_items.FINISH_DATE as finish_date, rdm_roadmap_items.CAPACITY_CLIPPED as capacity_clp, rdm_roadmap_items.ACTUAL_TSV as actual_tsv, rdm_roadmap_items.linked_internal_id as linked_internal_id, odf_ca_rdm_roadmap_item.vsm_pi_delivery_time as vsm_pi_delivery_time, rdm_roadmap_items.PAYBACK_PERIOD as payback_period, odf_ca_rdm_roadmap_item.eng_alloc as eng_alloc, odf_ca_rdm_roadmap_item.ml_eng_alloc as ml_eng_alloc, odf_ca_rdm_roadmap_item.clr_team as clr_team, rdm_roadmap_items.ACTUAL as actual, rdm_roadmap_items.CAPITAL_COST_TSV as cap_cost_tsv, odf_ca_rdm_roadmap_item.mgr_alloc as mgr_alloc, odf_ca_rdm_roadmap_item.vsm_est_userstory as vsm_est_userstory, odf_ca_rdm_roadmap_item.vsm_agl_risk_score as vsm_agl_risk_score, odf_ca_rdm_roadmap_item.vsm_agl_act_start as vsm_agl_act_start, NVL(RDM_ROADMAP_ITEMS.OPERATING_COST, 0)-NVL(RDM_ROADMAP_ITEMS.ACTUAL_OPERATING_COST, 0) as remain_op_cost, odf_ca_rdm_roadmap_item.obj_work_status as obj_work_status, odf_ca_rdm_roadmap_item.trvl_exp_alloc as trvl_exp_alloc, rdm_roadmap_items.SYNC as sync, CREATED.FULL_NAME as created_by, odf_ca_rdm_roadmap_item.vsm_pfl_lifecycle as vsm_pfl_lifecycle, NVL(RDM_ROADMAP_ITEMS.CAPACITY_CLIPPED, 0)-NVL(RDM_ROADMAP_ITEMS.ACTUAL_CLIPPED, 0) as remain_capacity_clp, odf_ca_rdm_roadmap_item.corp_mark_alloc as corp_mark_alloc, rdm_roadmap_items.NAME as name, odf_ca_rdm_roadmap_item.mater_alloc as mater_alloc, odf_ca_rdm_roadmap_item.clr_agile_sync as clr_agile_sync, rdm_roadmap_items.priority as rmi_priority, odf_ca_rdm_roadmap_item.prod_own_alloc as prod_own_alloc, (
        SELECT LISTAGG( value , ', ') WITHIN GROUP (ORDER BY value)  FROM
        (
          select  omvl2.value
          from
          odf_multi_valued_lookups omvl
          inner join 	inv_investments inv on inv.ODF_OBJECT_CODE || ':' || inv.id = omvl.value and omvl.object = 'odf_agreement'
          and omvl.attribute = 'predecessors'
          inner join rdm_roadmap_items rmi on rmi.linked_internal_id = inv.id
          inner join odf_multi_valued_lookups omvl2 on omvl2.pk_id = omvl.pk_id and omvl2.object = 'odf_agreement' and omvl2.attribute = 'successors'
          where
          rmi.id = RDM_ROADMAP_ITEMS.ID
          FETCH NEXT 25 ROWS ONLY
        )
        ) as agmntsuccessors, odf_ca_rdm_roadmap_item.vsm_est_storypts as vsm_est_storypts, rdm_roadmap_items.BUDGET_CAP_COST_TSV as budget_cost_cap_tsv, rdm_roadmap_items.NOTE as note, rdm_roadmap_items.SPONSOR as sponsor, odf_ca_rdm_roadmap_item.equip_alloc as equip_alloc, rdm_roadmap_items.CAPITAL_COST as cap_cost, rdm_roadmap_items.CODE as code, rdm_roadmap_items.ACTUAL_CAPITAL_COST_TSV as actual_cap_cost_tsv, rdm_roadmap_items.ACTUAL_CLIPPED as actual_clp, roadmap_id.odf_period_end as odf_period_end, rdm_roadmap_items.DESCRIPTION as description, odf_ca_rdm_roadmap_item.sol_mark_alloc as sol_mark_alloc, odf_ca_rdm_roadmap_item.clr_stakeholder as clr_stakeholder, odf_ca_rdm_roadmap_item.vsm_agl_state as vsm_agl_state, rdm_roadmap_items.ROI as roi, (SELECT COUNT(1) FROM DUAL WHERE EXISTS (SELECT 1 FROM odf_multi_valued_lookups WHERE object = 'odf_agreement' AND attribute IN (
        'successors' , 'predecessors' ) AND value = CONCAT(CONCAT(INV_INVESTMENTS.ODF_OBJECT_CODE,':'),RDM_ROADMAP_ITEMS.linked_internal_id))) as has_agreements_hid, odf_ca_rdm_roadmap_item.data_anlst_eng_alloc as data_anlst_eng_alloc, odf_ca_rdm_roadmap_item.sec_arch_alloc as sec_arch_alloc, odf_ca_rdm_roadmap_item.vsm_pctdon_plan_est as vsm_pctdon_plan_est, NVL(RDM_ROADMAP_ITEMS.OPERATING_COST_CLIPPED, 0)-NVL(RDM_ROADMAP_ITEMS.ACTUAL_OPERATING_COST_CLIPPED, 0) as remain_op_cost_clp, rdm_roadmap_items.ROADMAP_ID as roadmap_id, odf_ca_rdm_roadmap_item.vsm_lean_bc as vsm_lean_bc, rdm_roadmap_items.LOCATIONID as location_code, INV_INVESTMENTS.CODE as linked_to_id, rdm_roadmap_items.ACTUAL_OPERATING_COST_CLIPPED as actual_op_cost_clp, NVL(RDM_ROADMAP_ITEMS.CAPITAL_COST_CLIPPED, 0)+NVL(RDM_ROADMAP_ITEMS.OPERATING_COST_CLIPPED, 0) as total_cost_clp, RDM_ROADMAP_ITEMS.LAST_UPDATED_DATE as last_updated_date, rdm_roadmap_items.FCST_OP_COST_TSV as fcst_cst_op_tsv, rdm_roadmap_items.OWNER as owner, odf_ca_rdm_roadmap_item.ux_alloc as ux_alloc, odf_ca_rdm_roadmap_item.obj_int_mappings as obj_int_mappings, rdm_roadmap_items.ACTUAL_OPERATING_COST as actual_op_cost, rdm_roadmap_items.ACTUAL_CAPITAL_COST as actual_cap_cost, NVL(RDM_ROADMAP_ITEMS.CAPITAL_COST_CLIPPED, 0)-NVL(RDM_ROADMAP_ITEMS.ACTUAL_CAPITAL_COST_CLIPPED, 0) as remain_cap_cost_clp, rdm_roadmap_items.NPV as npv, ( SELECT NAME FROM CMN_CAPTIONS_NLS WHERE TABLE_NAME = 'ODF_OBJECTS' AND PK_ID = (SELECT ID FROM ODF_OBJECTS WHERE CODE = INV_INVESTMENTS.ODF_OBJECT_CODE) AND LANGUAGE_CODE = user_context.language_code ) as linked_to_type, odf_ca_rdm_roadmap_item.arch_allocation as arch_allocation, rdm_roadmap_items.BUDGET_OP_COST_TSV as budget_cost_op_tsv, odf_ca_rdm_roadmap_item.vsm_agl_plan_start as vsm_agl_plan_start, odf_ca_rdm_roadmap_item.vsm_agl_act_finish as vsm_agl_act_finish, RDM_ROADMAP_ITEMS.CREATED_DATE as created_date, odf_ca_rdm_roadmap_item.abm_mark_alloc as abm_mark_alloc, odf_ca_rdm_roadmap_item.partition_code as partition_code, roadmap_id.odf_entity_code as odf_entity_code , user_context.user_id odf_user_id from rdm_roadmap_items rdm_roadmap_items inner join (select u.id user_id, u.user_name, u.locale, l.language_code from cmn_sec_users u, cmn_languages l where u.language_id = l.id) user_context  on user_context.user_id = user_context.user_id  JOIN rdm_roadmaps rdm_roadmaps ON rdm_roadmaps.id=rdm_roadmap_items.roadmap_id JOIN srm_resources CREATED ON CREATED.user_id=rdm_roadmap_items.created_by JOIN srm_resources UPDATED ON UPDATED.user_id=rdm_roadmap_items.last_updated_by LEFT OUTER JOIN inv_investments INV_INVESTMENTS ON INV_INVESTMENTS.ID = RDM_ROADMAP_ITEMS.LINKED_INTERNAL_ID LEFT OUTER JOIN odf_object_sort_order SORTORDER ON SORTORDER.INSTANCE_ID = RDM_ROADMAP_ITEMS.ID AND SORTORDER.OBJECT_CODE = 'rdm_roadmap_item' AND SORTORDER.ASSOC_OBJECT_REFERENCE_ID = RDM_ROADMAP_ITEMS.SCENARIO_ID JOIN odf_ca_rdm_roadmap_item odf_ca_rdm_roadmap_item ON odf_ca_rdm_roadmap_item.id=rdm_roadmap_items.id JOIN (select   'x' pmd_analytical_partition_by, rdm_roadmaps.id odf_pk, odf_ca_rdm_roadmap.odf_period_end as odf_period_end, odf_ca_rdm_roadmap.odf_period_type as odf_period_type, odf_ca_rdm_roadmap.odf_period_start as odf_period_start, odf_ca_rdm_roadmap.odf_entity_code as odf_entity_code from rdm_roadmaps rdm_roadmaps JOIN odf_ca_rdm_roadmap odf_ca_rdm_roadmap ON odf_ca_rdm_roadmap.id=rdm_roadmaps.id where 1 = 1 )  roadmap_id ON roadmap_id.odf_pk=rdm_roadmap_items.ROADMAP_ID  where 1 = 1</text>
  </QueryResult>
</ClarityDBViewQuery>
