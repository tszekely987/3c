<ClarityDBViewQuery>
  <QueryResult code="ODF_REQUIREMENT_V2">
    <indexes/>
    <text_length>5527</text_length>
    <text>select   'x' pmd_analytical_partition_by, rqp_requirements.id odf_pk, rqp_requirements.EST_OP_COST as rqp_est_op_cost, rqp_requirements.REQ_IMPL_PLAN as rqp_req_impl_plan, (CASE WHEN NVL(RELEASE_ID,0) = 0 THEN 1 ELSE 0 END) as rqp_release_unassgnd, (select prname from prtask where prid = task_id) as rqp_task, rqp_requirements.BGT_SIZE as rqp_bgt_size, (NVL((SELECT SUM(NVL(est_cap_cost,0)) FROM RQP_FLAT_HIERARCHY WHERE PARENT_ID = RQP_REQUIREMENTS.ID),0) + NVL(est_cap_cost,0)) as rqp_est_cap_cost_agg, rqp_requirements.RELEASE_ID as rqp_release, (case when (select count(distinct release_id) from rqp_flat_hierarchy where parent_id = rqp_requirements.id) > 1 then 1 else 0 end) as rqp_release_various, rqp_requirements.EST_HLM_SIZE as rqp_est_hlm_size, rqp_requirements.FEATURE_OVERVIEW as rqp_feature_overview, rqp_requirements.PROJECT_ID as rqp_project_id, rqp_requirements.BGT_OP_COST as rqp_bgt_op_cost, CREATED.FULL_NAME as created_by, (case when project_id is not null then
      concat(concat((select name from inv_investments where id = project_id), ':'), (select prname from prtask where prid = task_id))
      else
      (select prname from prtask where prid = task_id)
      end) as rqp_project_task, rqp_requirements.MANAGER_ID as rqp_manager_id, rqp_requirements.EST_SIZE as rqp_est_size, rqp_requirements.APPROVEDTIME as rqp_approvedtime, NVL(RQP_REQUIREMENTS.EST_EFFORT,0) / PRJ_HPD_FACTOR_FCT() as rqp_est_effort, rqp_requirements.ATTACHMENT as rqp_attachment, (rqp_requirements.PRIORITY_1 * 1 + rqp_requirements.PRIORITY_2 * 1 + rqp_requirements.PRIORITY_3 * 1 + rqp_requirements.PRIORITY_4 * 1) / (1 + 1 + 1 + 1) as rqp_req_priority, (select name from inv_investments where id = project_id) as rqp_project, UPDATED.FULL_NAME as updated_by, UPDATED.ID as updated_by_id, CREATED.ID as created_by_id, (CASE WHEN NVL(RELEASE_ID,0) != 0 THEN 1 ELSE 0 END) as rqp_release_assigned, (SELECT  v.VALUE
        FROM    CMN_OPTIONS o, CMN_OPTION_VALUES v
        WHERE   o.ID = v.OPTION_ID AND v.USER_ID IS NULL
        AND     o.OPTION_CODE = 'PRJ_EFFORT_DISP_UNIT') as rqp_effort_units, NVL(RQP_REQUIREMENTS.BGT_EFFORT,0) / PRJ_HPD_FACTOR_FCT() as rqp_bgt_effort, (NVL((SELECT SUM(NVL(est_cap_cost,0)) FROM RQP_FLAT_HIERARCHY WHERE PARENT_ID = RQP_REQUIREMENTS.ID),0) + NVL(est_cap_cost,0) +
     		 NVL((SELECT SUM(NVL(est_op_cost,0)) FROM RQP_FLAT_HIERARCHY WHERE PARENT_ID = RQP_REQUIREMENTS.ID),0) + NVL(est_op_cost,0)) as rqp_est_cost_agg, (NVL((SELECT SUM(NVL(est_effort/PRJ_HPD_FACTOR_FCT(),0)) FROM RQP_FLAT_HIERARCHY WHERE PARENT_ID = RQP_REQUIREMENTS.ID),0) + NVL(est_effort/ PRJ_HPD_FACTOR_FCT(),0)) as rqp_est_effort_agg, (NVL((SELECT SUM(NVL(est_size,0)) FROM RQP_FLAT_HIERARCHY WHERE PARENT_ID = RQP_REQUIREMENTS.ID),0) + NVL(est_size,0)) as rqp_est_size_agg, rqp_requirements.CURRENCY_CODE as rqp_currency_code, rqp_requirements.PRIORITY_2 as rqp_priority_2, rqp_requirements.TASK_ID as rqp_task_id, rqp_requirements.PRIORITY_1 as rqp_priority_1, rqp_requirements.PRIORITY_4 as rqp_priority_4, rqp_requirements.REQUESTED_BY as rqp_requested_by, rqp_requirements.PRIORITY_3 as rqp_priority_3, odf_ca_requirement.odf_period_end as odf_period_end, odf_ca_requirement.odf_period_type as odf_period_type, rqp_requirements.RISK as rqp_risk, rqp_requirements.STATUS as rqp_status, rqp_requirements.CODE as rqp_instance_code, odf_ca_requirement.odf_period_start as odf_period_start, rqp_requirements.THEME as rqp_theme, rqp_requirements.REQ_IMPACT_ANALYSIS as rqp_impact_analysis, rqp_requirements.STORY_TEXT_2 as rqp_story_text_2, (SELECT P.PAGE_CODE FROM CMN_PAGES P WHERE P.ID in
          (SELECT CASE WHEN CMN_PAGES.PRINCIPAL_TYPE = 'SYSTEM' THEN CMN_PAGES.ID
                  ELSE NVL(CMN_PAGES.ORIGINATING_PAGE_ID,CMN_PAGES.ID) END
          FROM CMN_INSTANCE_PAGES, CMN_PAGES
          WHERE CMN_INSTANCE_PAGES.PAGE_FRAME_ID = CMN_PAGES.ID
            AND CMN_INSTANCE_PAGES.OBJECT_TYPE = 'RQP_REQUIREMENT'
		    AND CMN_INSTANCE_PAGES.OBJECT_INSTANCE_ID = RQP_REQUIREMENTS.ID
          )
        ) as page_layout, rqp_requirements.REQ_COMMENTS as rqp_req_comments, rqp_requirements.STORY_TEXT_3 as rqp_story_text_3, rqp_requirements.STORY_TEXT_1 as rqp_story_text_1, RQP_REQUIREMENTS.LAST_UPDATED_DATE as last_updated_date, rqp_requirements.DESCRIPTION as rqp_description, rqp_requirements.TYPE as rqp_type, (NVL(RQP_REQUIREMENTS.BGT_CAP_COST,0)+NVL(RQP_REQUIREMENTS.BGT_OP_COST,0)) as rqp_bgt_total_cost, (NVL((SELECT SUM(NVL(est_op_cost,0)) FROM RQP_FLAT_HIERARCHY WHERE PARENT_ID = RQP_REQUIREMENTS.ID),0) + NVL(est_op_cost,0)) as rqp_est_op_cost_agg, rqp_requirements.TITLE as rqp_title, rqp_requirements.FEATURE_DRIVER as rqp_feature_driver, rqp_requirements.FEATURE_VISION as rqp_feature_vision, rqp_requirements.INVESTMENT_ID as rqp_investment, rqp_requirements.EST_CAP_COST as rqp_est_cap_cost, rqp_requirements.BGT_CAP_COST as rqp_bgt_cap_cost, (NVL(RQP_REQUIREMENTS.EST_CAP_COST,0)+NVL(RQP_REQUIREMENTS.EST_OP_COST,0)) as rqp_est_total_cost, RQP_REQUIREMENTS.CREATED_DATE as created_date, odf_ca_requirement.partition_code as partition_code, rqp_requirements.APPROVEDBY_ID as rqp_approvedby_id, rqp_requirements.COMMITTED as rqp_committed, odf_ca_requirement.odf_entity_code as odf_entity_code  from rqp_requirements rqp_requirements JOIN srm_resources CREATED ON CREATED.user_id=rqp_requirements.created_by JOIN srm_resources UPDATED ON UPDATED.user_id=rqp_requirements.last_updated_by JOIN odf_ca_requirement odf_ca_requirement ON odf_ca_requirement.id=rqp_requirements.id  where 1 = 1</text>
  </QueryResult>
</ClarityDBViewQuery>
