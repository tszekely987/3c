<ClarityDBViewQuery>
  <QueryResult code="ODF_ODF_HIERARCHY_V2">
    <indexes/>
    <text_length>3049</text_length>
    <text>select   'x' pmd_analytical_partition_by, odf_hierarchies.id odf_pk, (SELECT API_ALIAS FROM ODF_OBJECTS WHERE NLS_UPPER(CODE) = NLS_UPPER(ODF_HIERARCHIES.TYPE) ) as type_api_alias, odf_hierarchies.CODE as code, odf_ca_odf_hierarchy.clr_lean_canvas as clr_lean_canvas, odf_ca_odf_hierarchy.odf_period_end as odf_period_end, odf_ca_odf_hierarchy.odf_period_type as odf_period_type, odf_hierarchies.DESCRIPTION as description, odf_hierarchies.TYPE as type, 'odf_hierarchy' as odf_obj_type, odf_ca_odf_hierarchy.odf_period_start as odf_period_start, ( select poa.unit_id from prj_obs_associations poa, prj_obs_units pou, prj_obs_types pot, prj_obs_object_types poot where  NLS_UPPER(poa.table_name) = NLS_UPPER('ODF_HIERARCHY') and poa.record_id = ODF_HIERARCHIES.ID and poa.unit_id = pou.id and pou.type_id = pot.id   and pot.id = poot.type_id and NLS_UPPER(poa.table_name) = NLS_UPPER(poot.table_name) and NLS_UPPER(poot.assoc_att_code) = NLS_UPPER('odf_orga_n927041378') ) as odf_orga_n927041378, ODF_HIERARCHIES.LAST_UPDATED_DATE as last_updated_date, (NVL((SELECT 1 FROM DUAL WHERE EXISTS (SELECT 1 from NMC_CONVERSATIONS TC WHERE TC.RESOURCE_NAME='odf_hierarchy' AND TC.RESOURCE_ID = odf_hierarchies.id)), 0)) as has_conversations, odf_ca_odf_hierarchy.clr_manager as clr_manager, odf_ca_odf_hierarchy.clr_finish as clr_finish, CREATED.FULL_NAME as created_by, (select listagg(tbl.api_alias, ',') within group (order by nls_name) from (               
          SELECT DISTINCT o.api_alias, nls.name as nls_name FROM odf_objects o
            JOIN odf_hierarchy_nodes n ON o.code = n.object_code
               AND n.hierarchy_id = odf_hierarchies.id
            JOIN cmn_captions_nls nls on o.id = nls.pk_id
               AND nls.table_name = 'ODF_OBJECTS'
               AND nls.language_Code = user_context.language_code
          ) tbl) as node_inst_apialiases, odf_hierarchies.ODF_BLUEPRINT_ID as odf_blueprint_id, odf_ca_odf_hierarchy.clr_start as clr_start, odf_ca_odf_hierarchy.clr_hier_status as clr_hier_status, odf_hierarchies.NAME as name, UPDATED.FULL_NAME as updated_by, NVL( odf_hierarchies.odf_blueprint_id, (select id from odf_blueprints b where b.type = NLS_UPPER('odf_hierarchy') and b.is_default = 1  and  b.classifier in (SELECT API_ALIAS FROM ODF_OBJECTS WHERE NLS_UPPER(CODE) = NLS_UPPER(ODF_HIERARCHIES.TYPE) ) ) ) as odf_blp_active_id, ODF_HIERARCHIES.CREATED_DATE as created_date, odf_ca_odf_hierarchy.partition_code as partition_code, odf_ca_odf_hierarchy.odf_entity_code as odf_entity_code , user_context.user_id odf_user_id from odf_hierarchies odf_hierarchies inner join (select u.id user_id, u.user_name, u.locale, l.language_code from cmn_sec_users u, cmn_languages l where u.language_id = l.id) user_context  on user_context.user_id = user_context.user_id  JOIN srm_resources CREATED ON CREATED.user_id=odf_hierarchies.created_by JOIN srm_resources UPDATED ON UPDATED.user_id=odf_hierarchies.last_updated_by JOIN odf_ca_odf_hierarchy odf_ca_odf_hierarchy ON odf_ca_odf_hierarchy.id=odf_hierarchies.id  where 1 = 1</text>
  </QueryResult>
</ClarityDBViewQuery>
