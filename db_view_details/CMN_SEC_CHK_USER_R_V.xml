<ClarityDBViewQuery>
  <QueryResult code="CMN_SEC_CHK_USER_R_V">
    <indexes/>
    <text_length>1643</text_length>
    <text>SELECT   --  Group Rule
        UG.USER_ID,  
        RI.OBJECT_ID,
        O.OBJECT_CODE,
        O.OBJECT_TYPE_CODE OBJECT_TYPE,
        O.COMPONENT_CODE,
        RI.PERMISSION_CODE,
        RI.PERMISSION_VALUE
FROM    CMN_SEC_USER_GROUPS UG,
        CMN_SEC_GROUP_FLAT_HIERS H,
        CMN_SEC_RIGHT RI,
        CMN_SEC_GROUPS G,        
        CMN_SEC_OBJECTS O
WHERE   UG.GROUP_ID = H.PARENT_GROUP_ID
AND     UG.GROUP_ID = G.ID
AND     G.GROUP_ROLE_TYPE = 'GROUP'
AND     G.IS_ACTIVE = 1
AND     RI.IS_ACTIVE = 1
AND     RI.RIGHT_ID = H.GROUP_ID
AND     O.ID = RI.OBJECT_ID
UNION
SELECT    -- USER RULE
        OS.PRINCIPAL_ID USER_ID,
        RI.OBJECT_ID,
        O.OBJECT_CODE,
        O.OBJECT_TYPE_CODE OBJECT_TYPE,
        O.COMPONENT_CODE,
        RI.PERMISSION_CODE,
        RI.PERMISSION_VALUE
FROM    CMN_SEC_ASSGND_RIGHT OS,
        CMN_SEC_RIGHT RI,        
        CMN_SEC_OBJECTS O        
WHERE   OS.INSTANCE_TYPE = 'SYSTEM'
AND     OS.PRINCIPAL_TYPE = 'USER'
AND     OS.RIGHT_ID = RI.RIGHT_ID
AND     RI.IS_ACTIVE = 1
AND     O.ID = RI.OBJECT_ID
UNION
SELECT    -- OBS UNIT RULE FOR PRINCIPAL IS OBS
        OU.USER_ID USER_ID,
        RI.OBJECT_ID,
        O.OBJECT_CODE,
        O.OBJECT_TYPE_CODE OBJECT_TYPE,
        O.COMPONENT_CODE,
        RI.PERMISSION_CODE,
        RI.PERMISSION_VALUE
FROM    CMN_SEC_OBS_USERS_V OU, 
        CMN_SEC_ASSGND_RIGHT AR,
        CMN_SEC_RIGHT RI,
        CMN_SEC_OBJECTS O        
WHERE   AR.PRINCIPAL_TYPE = OU.UNIT_MODE
AND     AR.PRINCIPAL_ID = OU.UNIT_ID
AND     AR.INSTANCE_TYPE = 'SYSTEM'
AND     AR.RIGHT_ID = RI.RIGHT_ID
AND     RI.IS_ACTIVE = 1
AND     O.ID = RI.OBJECT_ID</text>
  </QueryResult>
</ClarityDBViewQuery>
