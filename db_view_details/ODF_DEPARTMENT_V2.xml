<ClarityDBViewQuery>
  <QueryResult code="ODF_DEPARTMENT_V2">
    <indexes/>
    <text_length>7053</text_length>
    <text>select   'x' pmd_analytical_partition_by, departments.id odf_pk, fin_financials.is_sys_val_for_tcc as is_sys_val_for_tcc, fin_financials.FORECAST_MIRR as forecast_mirr, (SELECT
            CASE WHEN NVL(F.BUDGET_CST_TOTAL,0) > 0
              THEN NVL(F.BUDGET_CST_CAPITAL_TOTAL,0) / F.BUDGET_CST_TOTAL
              ELSE NULL END
        FROM FIN_FINANCIALS F 
        WHERE F.ID = FIN_FINANCIALS.ID) as budget_cst_capital_pct, fin_financials.PLANNED_CST_OPERATING_TOTAL as planned_cst_operating_total, fin_financials.FORECAST_BENEFIT as forecast_benefit, fin_financials.FORECAST_COST as forecast_cost, fin_financials.FORECAST_CST_TOTAL as forecast_cst_total, fin_financials.PLANNED_BEN_START as planned_ben_start, departments.DEFAULT_REVIEWER as default_reviewer, fin_financials.FORECAST_REV_FINISH as forecast_rev_finish, fin_financials.BUDGET_CST_OPERATING_TOTAL as budget_cst_operating_total, fin_financials.FORECAST_BREAKEVEN as forecast_breakeven, fin_financials.BUDGET_NPV as budget_npv, fin_financials.PLANNED_COST_CAPITAL as plan_cost_cap, fin_financials.BUDGET_COST_OPERATING as budget_cost_op, fin_financials.BUDGET_ACTUAL_BENEFIT as budget_actual_benefit, fin_financials.BUDGET_COST as budget_cost, fin_financials.FORECAST_CST_CAPITAL as fcst_cst_cap, departments.ENTITY_ID as entity_id, fin_financials.total_cost_of_capital as override_val_for_tcc, fin_financials.BUDGET_CST_FINISH as budget_cst_finish, fin_financials.BUDGET_MIRR as budget_mirr, DPT_IS_PROVIDER_DEPT_FCT(DEPARTMENTS.ID) as is_provider, DPT_IS_CONSUMER_DEPT_FCT(DEPARTMENTS.ID) as is_consumer, fin_financials.BUDGET_ROI as budget_roi, UPDATED.FULL_NAME as updated_by, fin_financials.PLANNED_BENEFIT as plan_benefit, fin_financials.PLANNED_BEN_TOTAL as planned_ben_total, departments.SHORTDESC as short_description, fin_financials.BUDGET_REV_FINISH as budget_rev_finish, odf_ca_financials.odf_period_type as odf_period_type, fin_financials.BUDGET_CST_CAPITAL_TOTAL as budget_cst_capital_total, fin_financials.BUDGET_BREAKEVEN as budget_breakeven, fin_financials.FORECAST_CST_OPERATING as fcst_cst_op, fin_financials.FORECAST_ROI as forecast_roi, fin_financials.IS_CALC_PV_INFO as is_calc_pv_info, fin_financials.CURRENCY_CODE as currency_code, odf_ca_financials.odf_period_start as odf_period_start, ( SELECT CASE CMN_PAGES.PRINCIPAL_TYPE WHEN 'SYSTEM' THEN CMN_PAGES.ID ELSE
          NVL(CMN_PAGES.ORIGINATING_PAGE_ID,CMN_PAGES.ID) END
          FROM CMN_INSTANCE_PAGES, CMN_PAGES
          WHERE CMN_INSTANCE_PAGES.PAGE_FRAME_ID = CMN_PAGES.ID
          AND CMN_INSTANCE_PAGES.OBJECT_INSTANCE_ID = DEPARTMENTS.ID
          AND CMN_INSTANCE_PAGES.OBJECT_TYPE = 'DPT_DEPARTMENT' ) as page_layout, fin_financials.PLANNED_NPV as planned_npv, departments.PARENT_DEPARTMENT_ID as parent_department_id, odf_ca_financials.odf_object_code as odf_object_code, departments.IS_ACTIVE as is_active, fin_financials.PLANNED_CST_CAPITAL_TOTAL as planned_cst_capital_total, fin_financials.PLANNED_CST_TOTAL as planned_cst_total, fin_financials.PLANNED_COST as plan_cost, (select total_cost_of_capital from prsite) as system_value_for_tcc, fin_financials.PLANNED_MIRR as planned_mirr, fin_financials.PLANNED_CST_START as planned_cst_start, fin_financials.FORECAST_NPV as forecast_npv, departments.DELEGATE_INV_APPR as delegate_inv_appr, (SELECT
            CASE WHEN NVL(F.PLANNED_CST_TOTAL,0) > 0
              THEN NVL(F.PLANNED_CST_CAPITAL_TOTAL,0) / F.PLANNED_CST_TOTAL
              ELSE NULL END
        FROM FIN_FINANCIALS F 
        WHERE F.ID = FIN_FINANCIALS.ID) as planned_cst_capital_pct, fin_financials.PLANNED_CST_FINISH as planned_cst_finish, fin_financials.PLANNED_ROI as planned_roi, departments.DEPARTCODE as department_code, fin_financials.PLANNED_BEN_FINISH as planned_ben_finish, fin_financials.PLANNED_COST_OPERATING as plan_cost_op, fin_financials.BUDGET_COST_CAPITAL as budget_cost_cap, (SELECT
          CASE WHEN NVL(F.PLANNED_CST_TOTAL,0) > 0
              THEN NVL(F.PLANNED_CST_OPERATING_TOTAL,0) / F.PLANNED_CST_TOTAL
              ELSE NULL END
        FROM FIN_FINANCIALS F 
        WHERE F.ID = FIN_FINANCIALS.ID) as planned_cst_operating_pct, fin_financials.BUDGET_IRR as budget_irr, departments.DEPARTIDENTIFIER as dept_identifier, fin_financials.BUDGET_PAYBACK_PERIOD as budget_payback_period, fin_financials.FORECAST_PAYBACK_PERIOD as forecast_payback_period, fin_financials.ACTUAL_CST_OPERATING as actual_cst_op, CREATED.FULL_NAME as created_by, fin_financials.FORECAST_CST as fcst_cst, departments.ALT_DEFAULT_REVIEWER as alt_default_reviewer, fin_financials.ACTUAL_CST_CAPITAL as actual_cst_cap, departments.DEPARTMENT_MANAGER_ID as dept_manager_id, fin_financials.BUDGET_REV_TOTAL as budget_rev_total, fin_financials.PLANNED_IRR as planned_irr, odf_ca_financials.odf_period_end as odf_period_end, departments.DESCRIPTION as description, departments.BRM_ID as brm_id, fin_financials.is_sys_val_for_rr as is_sys_val_for_rr, fin_financials.BUDGET_REV_START as budget_rev_start, fin_financials.Initial_Investment as initial_investment, fin_financials.PLANNED_PAYBACK_PERIOD as planned_payback_period, fin_financials.reinvestment_rate as override_val_for_rr, fin_financials.BUDGET_CST_TOTAL as budget_cst_total, DEPARTMENTS.last_updated_date as last_updated_date, fin_financials.FORECAST_CST_START as forecast_cst_start, (select reinvestment_rate from prsite) as system_value_for_rr, fin_financials.ACTUAL_CST as actual_cst, fin_financials.BUDGET_CST_START as budget_cst_start, fin_financials.FORECAST_IRR as forecast_irr, fin_financials.FORECAST_CST_FINISH as forecast_cst_finish, fin_financials.BUDGET_BENEFIT as budget_benefit, fin_financials.IS_FCST_EQ_BDGT as is_fcst_eq_bdgt, fin_financials.FORECAST_REV_TOTAL as forecast_rev_total, fin_financials.PLANNED_BREAKEVEN as planned_breakeven, departments.OBS_UNIT_ID as obs_unit_id, (SELECT
            CASE WHEN NVL(F.BUDGET_CST_TOTAL,0) > 0
              THEN NVL(F.BUDGET_CST_OPERATING_TOTAL,0) / F.BUDGET_CST_TOTAL
              ELSE NULL END
        FROM FIN_FINANCIALS F 
        WHERE F.ID = FIN_FINANCIALS.ID) as budget_cst_operating_pct, DEPARTMENTS.created_date as created_date, odf_ca_department.partition_code as partition_code, fin_financials.PLANNED_ACTUAL_BENEFIT as plan_actual_benefit, odf_ca_financials.odf_entity_code as odf_entity_code, fin_financials.FORECAST_REV_START as forecast_rev_start  from departments departments JOIN srm_resources CREATED ON CREATED.user_id=DEPARTMENTS.created_by JOIN srm_resources UPDATED ON UPDATED.user_id=DEPARTMENTS.last_updated_by join odf_object_instance_mapping oim1 on departments.id = oim1.primary_object_instance_id  and oim1.primary_object_instance_code='department' join fin_financials fin_financials on oim1.secondary_object_instance_id = fin_financials.id and oim1.secondary_object_instance_code='financials' JOIN odf_ca_financials odf_ca_financials ON odf_ca_financials.id=FIN_FINANCIALS.id JOIN odf_ca_department odf_ca_department ON odf_ca_department.id=departments.id  where 1 = 1 and odf_ca_financials.odf_object_code = 'department'</text>
  </QueryResult>
</ClarityDBViewQuery>
