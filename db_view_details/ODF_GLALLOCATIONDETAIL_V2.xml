<ClarityDBViewQuery>
  <QueryResult code="ODF_GLALLOCATIONDETAIL_V2">
    <indexes/>
    <text_length>2598</text_length>
    <text>select   'x' pmd_analytical_partition_by, cbk_gl_allocation_detail.id odf_pk, cbk_gl_allocation_detail.gl_account_id as gl_account_id, cbk_gl_allocation_detail.department_id as department_id, cbk_gl_allocation_detail.flat_amount as flat_amount, glallocation_id.odf_period_end as odf_period_end, (SELECT entity_id FROM cbk_gl_allocation
        WHERE ID = CBK_GL_ALLOCATION_DETAIL.GL_ALLOCATION_ID) as entity_id, (select fin_period_code from entity where entity = (SELECT case when CHARGEBACK_SUBTYPE = 'INVESTMENT' then (SELECT entity_code FROM inv_investments WHERE id = cbk_gl_allocation.investment_id)
                                                                  else (SELECT entity FROM entity where id = cbk_gl_allocation.entity_id)
                                                                    end as entity
        FROM  cbk_gl_allocation
        WHERE ID = CBK_GL_ALLOCATION_DETAIL.GL_ALLOCATION_ID)) as periodtype, created.FULL_NAME as created_by, cbk_gl_allocation_detail.GL_ALLOCATION_ID as glallocation_id, cbk_gl_allocation_detail.OVERHEAD_ENTITY_ID as overhead_entity, glallocation_id.odf_period_start as odf_period_start, updated.FULL_NAME as last_updated_by, cbk_gl_allocation_detail.percentage as percentage, cbk_gl_allocation_detail.weightage as weightable, CBK_GL_ALLOCATION_DETAIL.CREATED_DATE as created_date, odf_ca_glallocationdetail.partition_code as partition_code, CBK_GL_ALLOCATION_DETAIL.LAST_UPDATED_DATE as last_updated_date, (SELECT case when CHARGEBACK_SUBTYPE = 'INVESTMENT' then (SELECT entity_code FROM inv_investments WHERE id = cbk_gl_allocation.investment_id)
                     else (SELECT entity FROM entity where id = cbk_gl_allocation.entity_id)
                end as entity
        FROM  cbk_gl_allocation
        WHERE ID = CBK_GL_ALLOCATION_DETAIL.GL_ALLOCATION_ID) as entity  from cbk_gl_allocation_detail cbk_gl_allocation_detail JOIN odf_ca_glallocationdetail odf_ca_glallocationdetail ON odf_ca_glallocationdetail.id=cbk_gl_allocation_detail.id JOIN (select   'x' pmd_analytical_partition_by, cbk_gl_allocation.id odf_pk, odf_ca_glallocation.odf_period_end as odf_period_end, odf_ca_glallocation.odf_period_start as odf_period_start from cbk_gl_allocation cbk_gl_allocation JOIN odf_ca_glallocation odf_ca_glallocation ON odf_ca_glallocation.id=cbk_gl_allocation.id where 1 = 1 )  glallocation_id ON glallocation_id.odf_pk=cbk_gl_allocation_detail.GL_ALLOCATION_ID , SRM_RESOURCES created, SRM_RESOURCES updated where CBK_GL_ALLOCATION_DETAIL.CREATED_BY = created.USER_ID AND CBK_GL_ALLOCATION_DETAIL.LAST_UPDATED_BY = updated.USER_ID</text>
  </QueryResult>
</ClarityDBViewQuery>
