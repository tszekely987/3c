<ClarityDBViewQuery>
  <QueryResult code="DWH_PROJECT_V">
    <indexes/>
    <text_length>9069</text_length>
    <text>select inv_investments.id odf_pk, INV_PROJECTS.PRID as investment_key, inv_projects.IS_PROGRAM as is_program, CMN_DATE_TRUNC_FCT(INV_PROJECTS.PRASOF) as as_of_date, inv_projects.RCF_OBJECTIVES as risk_objectives_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_OBJECTIVES) as rcf_objectives_caption, inv_projects.RCF_SPONSORSHIP as risk_sponsorship_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_SPONSORSHIP) as rcf_sponsorship_caption, inv_projects.RCF_FUNDING as risk_funding_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_FUNDING) as rcf_funding_caption, inv_projects.RCF_RESOURCE_AVAIL as risk_resource_avail_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_RESOURCE_AVAIL) as rcf_resource_avail_caption, inv_projects.RCF_INTERDEPENDENCY as risk_interdependency_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_INTERDEPENDENCY) as rcf_interdependency_caption, inv_projects.RCF_TECHNICAL as risk_technical_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_TECHNICAL) as rcf_technical_caption, inv_projects.RCF_HUMAN_INTERFACE as risk_human_interface_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_HUMAN_INTERFACE) as rcf_human_interface_caption, inv_projects.RCF_ORG_CULTURE as risk_org_culture_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_ORG_CULTURE) as rcf_org_culture_caption, inv_projects.RCF_SUPPORTABILITY as risk_supportability_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_SUPPORTABILITY) as rcf_supportability_caption, inv_projects.RCF_IMPLEMENTATION as risk_implementation_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_IMPLEMENTATION) as rcf_implementation_caption, inv_projects.RCF_FLEXIBILITY as risk_flexibility_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'RCF_STANDARD_LMH' and rownum = 1 and LOOKUP_ENUM = inv_projects.RCF_FLEXIBILITY) as rcf_flexibility_caption, inv_projects.prUserText1 as pr_usertext1, inv_projects.prUserText2 as pr_usertext2, inv_projects.prUserText3 as pr_usertext3, inv_projects.prUserText4 as pr_usertext4, inv_projects.prUserText5 as pr_usertext5, inv_projects.prUserText6 as pr_usertext6, inv_projects.prUserText7 as pr_usertext7, inv_projects.prSponsoredBy as sponsored_by, inv_projects.REQ_APPROVAL_REQD as is_req_approval_required, inv_projects.ev_calc_method as ev_calc_method_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'EVM_EV_CALC_METHOD' and rownum = 1 and LOOKUP_ENUM = inv_projects.ev_calc_method) as ev_calc_method_caption, inv_projects.EV_PERIOD_ID as ev_rpt_period_key, 
        PERIOD_DEFS.NAME
      ev_period_id_caption, inv_projects.prFinishImposed as is_finish_imposed, inv_projects.prStartImposed as is_start_imposed, INV_INVESTMENTS.CREATED_DATE as clarity_created_date, (
      CASE
      WHEN BASEREC.LAST_UPDATED_DATE IS NULL
      THEN INV_INVESTMENTS.LAST_UPDATED_DATE
      ELSE
      GREATEST(INV_INVESTMENTS.LAST_UPDATED_DATE, BASEREC.LAST_UPDATED_DATE)
      END
      ) as last_updated_date, odf_ca_project.agl_acp_stypts as agl_accepted_story_points, odf_ca_project.agl_acp_usrsty as agl_accepted_user_stories, odf_ca_project.agl_est_stypts as agl_estimated_story_points, odf_ca_project.agl_est_usrsty as agl_estimated_user_stories, odf_ca_project.agl_id as agl_project_port_item_type_id, odf_ca_project.agl_release as agl_release, to_number(null) as agl_milestones_key, odf_ca_project.agl_inv_category as agl_investment_category, odf_ca_project.agl_pctdon_stc as agl_done_by_story_count_pct, odf_ca_project.agl_pctdon_plest as agl_done_by_plan_estimate_pct, odf_ca_project.obj_est_factor1 as estimating_factor_1, odf_ca_project.obj_est_factor2 as estimating_factor_2, odf_ca_project.obj_objective as objective, (  select idea_prj_category_key from dwh_lkp_idea_project_cat_v where idea_prj_category_key = odf_ca_project.obj_request_category and language_code = dataw_context.language_code  )  as idea_prj_category_key, (  select idea_prj_category from dwh_lkp_idea_project_cat_v where idea_prj_category_key = odf_ca_project.obj_request_category and language_code = dataw_context.language_code  ) obj_request_category_caption, odf_ca_project.obj_request_type as idea_prj_type_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'OBJ_IDEA_PROJECT_TYPE' and rownum = 1 and LOOKUP_CODE = odf_ca_project.obj_request_type) as obj_request_type_caption, (  select id from srm_resources where id = odf_ca_project.obj_stakeholder1 )  as business_owner_key, (  select full_name from srm_resources where id = odf_ca_project.obj_stakeholder1 ) obj_stakeholder1_caption, (  select id from srm_resources where id = odf_ca_project.obj_stakeholder2 )  as project_mgmt_office_key, (  select full_name from srm_resources where id = odf_ca_project.obj_stakeholder2 ) obj_stakeholder2_caption, (  select id from srm_resources where id = odf_ca_project.obj_stakeholder3 )  as finance_governance_key, (  select full_name from srm_resources where id = odf_ca_project.obj_stakeholder3 ) obj_stakeholder3_caption, odf_ca_project.obj_status_reporting as status_reporting_key, (select NAME from cmn_lookups_v where language_code = dataw_context.language_code and lookup_type = 'OBJ_PROJECT_STATUS_REPORTING' and rownum = 1 and LOOKUP_CODE = odf_ca_project.obj_status_reporting) as obj_status_reporting_caption, odf_ca_project.agl_prelim_est as agl_preliminary_estimate, odf_ca_project.agl_risk_score as agl_risk_score, odf_ca_project.agl_state as agl_state, odf_ca_project.agl_value_score as agl_value_score, odf_ca_project.agl_wsjf_score as agl_wsjf_score, odf_ca_project.agl_pln_start as agl_planned_start, odf_ca_project.agl_pln_finish as agl_planned_finish, odf_ca_project.agl_act_start as agl_actual_start, odf_ca_project.agl_act_finish as agl_actual_finish, odf_ca_project.lc_problem as lc_problem, odf_ca_project.lc_solution as lc_solution, odf_ca_project.lc_unfair_advantage as lc_unfair_advantage, odf_ca_project.lc_unique_value as lc_unique_value, odf_ca_project.cps_presales_desc as cps_presales_desc, (  select id from srm_resources where id = odf_ca_project.clr_stakeholder )  as clr_stakeholder_key, (  select full_name from srm_resources where id = odf_ca_project.clr_stakeholder ) clr_stakeholder_caption, odf_ca_project.clr_headline as clr_headline, odf_ca_project.clr_pr_opp_problem as clr_pr_opp_problem, odf_ca_project.clr_pr_solution as clr_pr_solution, odf_ca_project.clr_pr_summary as clr_pr_summary, odf_ca_project.clr_quote as clr_quote, odf_ca_project.clr_pr_cust_exp as clr_pr_cust_exp, odf_ca_project.clr_pr_testimonial as clr_pr_testimonial, odf_ca_project.clr_pr_call_to_act as clr_pr_call_to_act, DBMS_LOB.SUBSTR(CMN_GET_PLAIN_TEXT_FCT(odf_ca_project.clr_risk_description), 1000, 1) as clr_risk_description, dataw_context.language_code, dataw_context.id language_id from inv_investments inv_investments inner join cmn_languages dataw_context on dataw_context.id = dataw_context.id  JOIN pac_mnt_projects PAC_MNT_PROJECTS ON PAC_MNT_PROJECTS.id=inv_investments.id JOIN inv_projects inv_projects ON inv_projects.prid=inv_investments.id join odf_object_instance_mapping oim1 on inv_investments.id = oim1.primary_object_instance_id  and oim1.primary_object_instance_code='project' join fin_financials fin_financials on oim1.secondary_object_instance_id = fin_financials.id and oim1.secondary_object_instance_code='financials' JOIN odf_ca_financials odf_ca_financials ON odf_ca_financials.id=FIN_FINANCIALS.id JOIN odf_ca_project odf_ca_project ON odf_ca_project.id=inv_investments.id LEFT OUTER JOIN evm_period_defs PERIOD_DEFS ON INV_PROJECTS.EV_PERIOD_ID = PERIOD_DEFS.ID LEFT OUTER JOIN prj_baseline_details BASEREC ON BASEREC.BASELINE_ID = INV_INVESTMENTS.BASELINE_ID AND BASEREC.OBJECT_TYPE='PROJECT'  where 1 = 1 and dataw_context.is_dw_enabled=1</text>
  </QueryResult>
</ClarityDBViewQuery>
