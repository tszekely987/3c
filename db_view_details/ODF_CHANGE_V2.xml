<ClarityDBViewQuery>
  <QueryResult code="ODF_CHANGE_V2">
    <indexes/>
    <text_length>4746</text_length>
    <text>select   'x' pmd_analytical_partition_by, rim_risks_and_issues.id odf_pk, rim_change_requests.BENEFITS as benefits, rim_change_requests.IMPACT_ON_BASELINE as impact_baseline, rim_risks_and_issues.PK_ID as pk_id, rim_risks_and_issues.STATUS_CODE as status_code, rim_risks_and_issues.ASSUMPTIONS as reasons, rim_change_requests.CLOSURE_DATE as closure_date, rim_change_requests.ASSESSOR as assessor, rim_risks_and_issues.DOCUMENT as document, pk_id.odf_period_end as odf_period_end, pk_id.odf_period_type as odf_period_type, rim_risks_and_issues.DESCRIPTION as description, rim_change_requests.EFFECT_ON_SCHEDULE as effect_on_schedule, rim_risks_and_issues.RIM_RISK_ISSUE_CODE as rim_risk_issue_code, inv_investments.NAME as inv_name, rim_change_requests.APPROVED_DATE as approved_date, (SELECT CASE WHEN count(conv.id) > 0 THEN 1 ELSE 0 END FROM NMC_CONVERSATIONS conv WHERE conv.RESOURCE_NAME = 'change' AND conv.RESOURCE_ID = RIM_RISKS_AND_ISSUES.ID) as has_conversation, rim_risks_and_issues.TABLE_NAME as table_name, (SELECT R.RIM_RISK_ISSUE_CODE FROM RIM_RISKS_AND_ISSUES R WHERE
        R.ID=RIM_RISKS_AND_ISSUES.PARENT_RISK_ISSUE_ID) as p_risk_issue_name, (select cov.value from cmn_options co, cmn_option_values cov where co.id = cov.option_id and
        co.option_code = 'CMN_SYSTEM_CURRENCY') as currency_code, rim_risks_and_issues.TARGET_RESOLUTION_DATE as exp_closure_date, pk_id.odf_period_start as odf_period_start, odf_ca_change.odmd_rpting as odmd_rpting, rim_change_requests.EFFECT_ON_RESOURCES as effect_on_resources, RIM_RISKS_AND_ISSUES.LAST_UPDATED_DATE as last_updated_date, rim_change_requests.EFFECT_ON_COST as effect_on_cost, (CASE WHEN RIM_RISKS_AND_ISSUES.PK_ID = (SELECT ID FROM INV_INVESTMENTS INV WHERE ODF_OBJECT_CODE = 'project' AND ID = RIM_RISKS_AND_ISSUES.PK_ID) THEN RIM_RISKS_AND_ISSUES.PK_ID ELSE NULL END) as prprojectid, rim_risks_and_issues.ASSIGNED_TO as assigned_to, rim_risks_and_issues.IMPACT_DESCRIPTION as impact_description, (NVL((SELECT 1 FROM DUAL WHERE EXISTS (SELECT 1 from NMC_CONVERSATIONS TC WHERE TC.RESOURCE_NAME='change' AND TC.RESOURCE_ID = rim_risks_and_issues.id)), 0)) as has_conversations, rim_risks_and_issues.CATEGORY_TYPE_CODE as category_type, CREATED.FULL_NAME as created_by, pk_id.name as pk_name, rim_risks_and_issues.PARENT_RISK_ISSUE_ID as parent_risk_issue_id, rim_change_requests.APPROVED_BY as approved_by, rim_change_requests.REVIEW_DATE as review_date, pk_id.unique_code as pk_unique_name, rim_risks_and_issues.PRIORITY_CODE as priority_code, rim_risks_and_issues.NAME as name, UPDATED.FULL_NAME as updated_by, rim_risks_and_issues.PK_ID as odf_parent_id, UPDATED.ID as updated_by_id, RIM_RISKS_AND_ISSUES.CREATED_DATE as created_date, CREATED.ID as created_by_id, odf_ca_change.partition_code as partition_code, rim_risks_and_issues.TYPE_CODE as type_code, rim_change_requests.ASSESSMENT_DATE as assessment_date, pk_id.entity as odf_entity_code  from rim_risks_and_issues rim_risks_and_issues JOIN rim_change_requests rim_change_requests ON rim_change_requests.id=rim_risks_and_issues.id JOIN srm_resources CREATED ON CREATED.user_id=rim_risks_and_issues.created_by JOIN srm_resources UPDATED ON UPDATED.user_id=rim_risks_and_issues.last_updated_by JOIN inv_investments inv_investments ON inv_investments.id=rim_risks_and_issues.pk_id JOIN odf_ca_change odf_ca_change ON odf_ca_change.id=rim_risks_and_issues.id JOIN (select odf_inv.odf_pk,odf_inv.unique_code,odf_inv.name,odf_project.entity,odf_project.odf_period_end,odf_project.odf_period_start,odf_project.odf_period_type from (select   'x' pmd_analytical_partition_by, inv_investments.id odf_pk, inv_investments.code as unique_code, inv_investments.name as name from inv_investments inv_investments where 1 = 1 ) odf_inv left outer join (select   'x' pmd_analytical_partition_by, inv_investments.id odf_pk, inv_investments.entity_code as entity, odf_ca_inv.odf_period_type as odf_period_type, odf_ca_inv.odf_period_start as odf_period_start, odf_ca_inv.odf_period_end as odf_period_end from inv_investments inv_investments JOIN pac_mnt_projects PAC_MNT_PROJECTS ON PAC_MNT_PROJECTS.id=inv_investments.id JOIN odf_ca_inv odf_ca_inv ON odf_ca_inv.id=inv_investments.id join odf_object_instance_mapping oim1 on inv_investments.id = oim1.primary_object_instance_id  and oim1.primary_object_instance_code='project' join fin_financials fin_financials on oim1.secondary_object_instance_id = fin_financials.id and oim1.secondary_object_instance_code='financials' JOIN odf_ca_financials odf_ca_financials ON odf_ca_financials.id=FIN_FINANCIALS.id where 1 = 1 ) odf_project on odf_inv.odf_pk = odf_project.odf_pk )  pk_id ON pk_id.odf_pk=rim_risks_and_issues.PK_ID  where 1 = 1 and rim_risks_and_issues.TYPE_CODE = 'CHANGE'</text>
  </QueryResult>
</ClarityDBViewQuery>
