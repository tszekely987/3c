<?xml version="1.0" encoding="UTF-8" standalone="no"?><NikuDataBus xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../xsd/nikuxog_contentPack.xsd">
      <Header action="write" externalSource="NIKU" objectType="contentPack" version="16.1.2.1567"/>
      <contentPack update="true">
        <queries update="true">
          <query code="capture3c.get_all_companies" isUserPortletAvailable="1" source="customer">
            
            
            
            
            <nls languageCode="en" name="capture3c.get_all_companies"/>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <nsql dbId="Niku" dbVendor="all"><![CDATA[SELECT @SELECT:DIM:USER_DEF:IMPLIED:COMPANIES:X.COMPANY_NAME:CODE@,
@SELECT:DIM_PROP:USER_DEF:IMPLIED:COMPANIES:X.LAST_UPDATED_DATE:LAST_UPDATED_DATE@,
@SELECT:DIM_PROP:USER_DEF:IMPLIED:COMPANIES:X.LAST_UPDATED_BY:LAST_UPDATED_BY@
FROM
(
	SELECT DISTINCT sc.company_name AS company_name,
		sc.last_updated_date AS last_updated_date,
		csu.user_name AS last_updated_by
	FROM srm_companies sc
	LEFT JOIN cmn_sec_users csu ON csu.id = sc.last_updated_by
	WHERE EXISTS
		(
			SELECT sq.company_name, sq.last_updated_date
			FROM
			(
				SELECT company_name, MAX(last_updated_date) AS last_updated_date
				FROM srm_companies
				GROUP BY company_name
			) sq
			WHERE sq.company_name = sc.company_name
				AND sq.last_updated_date = sc.last_updated_date
		)
) x
WHERE @FILTER@]]></nsql>
            <attribute id="code" required="false"/>
            <attribute id="last_updated_date" required="false"/>
            <attribute id="last_updated_by" required="false"/>
          </query>
        </queries>
      </contentPack>
    </NikuDataBus>