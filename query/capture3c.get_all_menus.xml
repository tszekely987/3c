<?xml version="1.0" encoding="UTF-8" standalone="no"?><NikuDataBus xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../xsd/nikuxog_contentPack.xsd">
      <Header action="write" externalSource="NIKU" objectType="contentPack" version="16.1.1.1485"/>
      <contentPack update="true">
        <queries update="true">
          <query code="capture3c.get_all_menus" isUserPortletAvailable="1" source="customer">
            
            
            
            
            <nls languageCode="en" name="capture3c.get_all_menus"/>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <nsql dbId="Niku" dbVendor="all"><![CDATA[SELECT @SELECT:DIM:USER_DEF:IMPLIED:MENUS:X.CODE:CODE@,
@SELECT:DIM_PROP:USER_DEF:IMPLIED:MENUS:X.LAST_UPDATED_DATE:LAST_UPDATED_DATE@,
@SELECT:DIM_PROP:USER_DEF:IMPLIED:MENUS:X.LAST_UPDATED_BY:LAST_UPDATED_BY@
FROM
(
	SELECT DISTINCT 'application' AS code,
		cmi.last_updated_date AS last_updated_date,
		csu.user_name AS last_updated_by
	FROM cmn_menu_items cmi
	JOIN
		(
			SELECT cp.id AS id
			FROM cmn_portlets cp
			WHERE cp.portlet_type_code = 'SYSTEM'
			AND cp.portlet_view_type_code = 'toc'
			AND cp.portlet_code = 'union.appLeftNav'
		) cp ON cp.id = cmi.container_id
	LEFT JOIN cmn_sec_users csu ON csu.id = cmi.last_updated_by
	WHERE @NVL@(cmi.is_hidden, 0 ) = 0
		AND cmi.last_updated_date =
			(
				SELECT MAX(cmi.last_updated_date) AS last_updated_date
				FROM cmn_menu_items cmi
				JOIN
					(
						SELECT cp.id AS id
						FROM cmn_portlets cp
						WHERE cp.portlet_type_code = 'SYSTEM'
						AND cp.portlet_view_type_code = 'toc'
						AND cp.portlet_code = 'union.appLeftNav'
					) cp ON cp.id = cmi.container_id
				WHERE @NVL@(cmi.is_hidden, 0 ) = 0
			)

	UNION ALL

	SELECT DISTINCT 'admin' AS code,
		cmi.last_updated_date AS last_updated_date,
		csu.user_name AS last_updated_by
	FROM cmn_menu_items cmi
	JOIN
		(
			SELECT cp.id AS id
			FROM cmn_portlets cp
			WHERE cp.portlet_type_code = 'SYSTEM'
			AND cp.portlet_view_type_code = 'toc'
			AND cp.portlet_code = 'union.adminLeftNav'
		) cp ON cp.id = cmi.container_id
	LEFT JOIN cmn_sec_users csu ON csu.id = cmi.last_updated_by
	WHERE @NVL@(cmi.is_hidden, 0 ) = 0
			AND cmi.last_updated_date =
				(
					SELECT MAX(cmi.last_updated_date) AS last_updated_date
					FROM cmn_menu_items cmi
					JOIN
						(
							SELECT cp.id AS id
							FROM cmn_portlets cp
							WHERE cp.portlet_type_code = 'SYSTEM'
							AND cp.portlet_view_type_code = 'toc'
							AND cp.portlet_code = 'union.adminLeftNav'
						) cp ON cp.id = cmi.container_id
					WHERE @NVL@(cmi.is_hidden, 0 ) = 0
				)
) x
WHERE @FILTER@]]></nsql>
            <attribute id="code" required="false"/>
            <attribute id="last_updated_date" required="false"/>
            <attribute id="last_updated_by" required="false"/>
          </query>
        </queries>
      </contentPack>
    </NikuDataBus>