<?xml version="1.0" encoding="UTF-8" standalone="no"?><NikuDataBus xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../xsd/nikuxog_contentPack.xsd">
      <Header action="write" externalSource="NIKU" objectType="contentPack" version="16.1.1.1485"/>
      <contentPack update="true">
        <queries update="true">
          <query code="log_slow_page_drill" isUserPortletAvailable="1" source="customer">
            
            
            
            
            <nls languageCode="en" name="Slow Pages Drill Down"/>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <nsql dbId="Niku" dbVendor="all"><![CDATA[SELECT /*+ index(LOG_DETAILS LOG_DETAILS_N4) */
         @SELECT:DIM:USER_DEF:IMPLIED:RESOURCE:URL_ACTION:URL_ACTION@,
         @SELECT:DIM_PROP:USER_DEF:IMPLIED:RESOURCE:PAGE_COUNT:PAGE_COUNT@,
	 @SELECT:DIM_PROP:USER_DEF:IMPLIED:RESOURCE:CASE WHEN AVG_RESP<=3000 THEN 0 WHEN AVG_RESP BETWEEN 3000 and 10000 THEN 1 ELSE 2 END:INDICATOR@,
         @SELECT:DIM_PROP:USER_DEF:IMPLIED:RESOURCE:TRUNC(LOG_DATE):LOG_DATE@,
         @SELECT:METRIC:USER_DEF:IMPLIED:ROUND((AVG_RESP/1000),1):AVG_RESP@
FROM
(SELECT   URL_SHORT url_action,
         round(avg(elapsed_time),0) avg_resp,
         LOG_DATE LOG_DATE,
         count(*) page_count,
         RANK() OVER (ORDER BY round(avg(elapsed_time),0) DESC) count_rank
FROM     LOG_DETAILS
WHERE    LOG_DATE=CAST(@WHERE:PARAM:XML:DATE:/data/log_date/@value@ AS DATE)
AND (@WHERE:PARAM:XML:STRING:/data/env/@value@ IS NULL OR @WHERE:PARAM:XML:STRING:/data/env/@value@=ENVIRONMENT)
AND URL_SHORT NOT IN ('/niku/xog','/niku/soap')
AND      @FILTER@
GROUP BY LOG_DATE,URL_SHORT
HAVING @HAVING_FILTER@)
WHERE COUNT_RANK<=20
AND ROWNUM<=20]]></nsql>
            <attribute id="url_action" required="false"/>
            <attribute id="page_count" required="false"/>
            <attribute id="indicator" required="false">
              
              
              
              
              <nls languageCode="en" name="indicator"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              <displayMapping defaultTypeCode="FlagRed" type="image">
                <mapping hi="2" lo="2" mappingCode="mapping-1" typeCode="FlagRed"/>
                <mapping hi="1" lo="1" mappingCode="mapping-2" typeCode="FlagFollowup"/>
                <mapping hi="0" lo="0" mappingCode="mapping-3" typeCode="FlagGreen"/>
              </displayMapping>
            </attribute>
            <attribute id="log_date" required="false"/>
            <attribute id="avg_resp" required="false"/>
          </query>
        </queries>
      </contentPack>
    </NikuDataBus>