<?xml version="1.0" encoding="UTF-8" standalone="no"?><NikuDataBus xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../xsd/nikuxog_contentPack.xsd">
      <Header action="write" externalSource="NIKU" objectType="contentPack" version="16.1.2.1567"/>
      <contentPack update="true">
        <queries update="true">
          <query category="PRODUCTIVITY" code="cop.prjPendingEstimates" isUserPortletAvailable="1" source="csk.niku.com">
            
            
            
            
            <nls description="Project Pending Estimates" languageCode="en" name="Pending Estimates"/>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <nsql dbId="Niku" dbVendor="all"><![CDATA[SELECT @select:dim:user_def:implied:assignment:a.prid:assign_int_id@,
       @select:dim_prop:user_def:implied:assignment:t.prid:task_int_id@,
       @select:dim_prop:user_def:implied:assignment:t.prprojectid:project_int_id@,
       @select:dim_prop:user_def:implied:assignment:inv.code:project_id@,
       @select:dim_prop:user_def:implied:assignment:inv.name:project_name@,
       @select:dim_prop:user_def:implied:assignment:inv.odf_object_code:investment_type@,         
       @select:dim_prop:user_def:implied:assignment:@UPPER@(inv.odf_object_code):investment_type_upper@,       
       @select:dim_prop:user_def:implied:assignment:inv.manager_id:project_manager_int_id@,
       @select:dim_prop:user_def:implied:assignment:t.prwbssequence:wbs_sequence@,
       @select:dim_prop:user_def:implied:assignment:t.prname:task_name@,
       @select:dim_prop:user_def:implied:assignment:r.full_name:resource_name@,
       @select:dim_prop:user_def:implied:assignment:r.id:resource_int_id@,
       @select:dim_prop:user_def:implied:assignment:r.person_type:resource_type@,
       @select:dim_prop:user_def:implied:assignment:a.prstart:assign_start_date@,
       @select:dim_prop:user_def:implied:assignment:@DBUSER@.cop_calc_finish_time_fct(a.prfinish):assign_finish_date@,
       @select:metric:user_def:implied:@NVL@(a.prpendestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END):pending_etc_hrs@,
       @select:metric:user_def:implied:@NVL@(a.prestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END):plan_etc_hrs@,
       @select:metric:user_def:implied:@NVL@(a.prpendactsum,0)/(CASE WHEN r.resource_type > 1 THEN 1 ELSE 3600 END):pending_actual_hrs@,
       @select:metric:user_def:implied:(@NVL@(a.prestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END))
                                                           - (@NVL@(a.prpendactsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END)):adj_plan_etc_hrs@,
       @select:metric:user_def:implied:(@NVL@(a.prpendestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END)) 
                                                               - ((@NVL@(a.prestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END)) 
                                                               - (@NVL@(a.prpendactsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END))):recommend_change_etc_hrs@,
       @select:metric:user_def:implied:(@NVL@(a.prpendestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END)) 
                                                               - ((@NVL@(a.prestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END)) 
                                                               - (@NVL@(a.prpendactsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END))):recommend_change_etc_hrs_sl@
FROM   PRASSIGNMENT a
INNER  JOIN  PRTASK t ON  t.prid =  a.prtaskid 
INNER  JOIN  INV_INVESTMENTS inv ON  inv.id =  t.prprojectid
INNER  JOIN  SRM_RESOURCES r ON  r.id = a.prresourceid
LEFT   OUTER JOIN prj_obs_associations assoc ON  assoc.record_id = inv.id
                                             AND assoc.table_name = 'SRM_PROJECTS'
                                             AND (( @WHERE:PARAM:USER_DEF:INTEGER:OBS@ IS NULL AND 1=2 ) OR ( @WHERE:PARAM:USER_DEF:INTEGER:OBS@ IS NOT NULL ))
LEFT   OUTER JOIN prj_obs_units_flat flat ON  flat.unit_id = assoc.unit_id		
                                          AND (( flat.branch_unit_id IS NULL ) OR (@WHERE:PARAM:USER_DEF:INTEGER:flat.branch_unit_id:OBS@ ))
WHERE  t.pristask <> 0
AND    t.prismilestone <> 1
AND    r.person_type <> 0
AND    (@WHERE:PARAM:USER_DEF:INTEGER:TIMEPERIOD@ IS NULL OR @WHERE:PARAM:USER_DEF:INTEGER:TIMEPERIOD@ IS NOT NULL)
AND    a.prpendestsum IS NOT NULL
AND    ((@NVL@(a.prpendestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END)) 
                                - ((@NVL@(a.prestsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END)) 
                                - (@NVL@(a.prpendactsum,0)/(CASE WHEN r.resource_type  > 1 THEN 1 ELSE 3600 END)))) <> 0
AND    @WHERE:SECURITY:INV:inv.id@
AND    @FILTER@]]></nsql>
            <attribute id="assign_int_id" required="false">
              
              
              
              
              <nls description="Assignment Internal ID" languageCode="en" name="Assignment Internal ID"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="task_int_id" required="false">
              
              
              
              
              <nls description="Task Internal ID" languageCode="en" name="Task Internal ID"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="project_int_id" lookup="SCH_BROWSE_PROJECT" required="false">
              
              
              
              
              <nls description="Project Filter" languageCode="en" name="Project Filter"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="project_id" required="false">
              
              
              
              
              <nls description="Project ID" languageCode="en" name="Project ID"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="project_name" required="false">
              
              
              
              
              <nls description="Project" languageCode="en" name="Project"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="investment_type" required="false">
              
              
              
              
              <nls description="Investment Object Code" languageCode="en" name="Investment Object Code"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="investment_type_upper" required="false">
              
              
              
              
              
              
              
              
              <nls description="Investment Object Code Upper" languageCode="en" name="Investment Object Code Upper"/>
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="project_manager_int_id" lookup="BROWSE_PROJMGR" required="false">
              
              
              
              
              <nls description="Project Manager Filter" languageCode="en" name="Project Manager Filter"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="wbs_sequence" required="false">
              
              
              
              
              <nls description="WBS Sequence" languageCode="en" name="WBS Sequence"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="task_name" required="false">
              
              <nls description="Task" languageCode="en" name="Task"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="resource_name" required="false">
              
              
              
              
              <nls description="Resource" languageCode="en" name="Resource"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="resource_int_id" lookup="SCH_BROWSE_RESOURCE" required="false">
              
              
              
              
              <nls description="Resource Filter" languageCode="en" name="Resource Filter"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="resource_type" lookup="SRM_RESOURCE_TYPE" required="false">
              
              
              
              
              <nls description=" Employment Type Filter" languageCode="en" name="Employment Type Filter"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="assign_start_date" required="false">
              
              
              
              
              <nls description="Start" languageCode="en" name="Start"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="assign_finish_date" required="false">
              
              
              
              
              <nls description="Finish" languageCode="en" name="Finish"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="pending_etc_hrs" required="false">
              
              
              
              
              <nls description="Pending ETC" languageCode="en" name="Pending ETC"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="plan_etc_hrs" required="false">
              
              
              
              
              <nls description="Plan ETC" languageCode="en" name="Plan ETC"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="pending_actual_hrs" required="false">
              
              
              
              
              <nls description="Pending Actuals" languageCode="en" name="Pending Actuals"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="adj_plan_etc_hrs" required="false">
              
              
              
              
              <nls description="Adjusted Plan ETC" languageCode="en" name="Adjusted Plan ETC"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="recommend_change_etc_hrs" required="false">
              
              
              
              
              <nls description="Recommended Change in ETC" languageCode="en" name="Recommended Change in ETC"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="recommend_change_etc_hrs_sl" required="false">
              
              
              
              
              <nls description="Increase/Decrease in ETC" languageCode="en" name="Increase/Decrease in ETC"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              <displayMapping defaultTypeCode="white" type="color">
                <mapping hi="10000" lo="0" mappingCode="mapping-1" typeCode="red"/>
                <mapping hi="0" lo="-10000" mappingCode="mapping-2" typeCode="green"/>
              </displayMapping>
            </attribute>
            <attribute id="param_obs" lookup="OBS_BROWSE_FLT_PRJ" required="false">
              
              
              
              
              <nls description="Project OBS Filter" languageCode="en" name="Project OBS Filter"/>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <attribute id="param_timeperiod" required="false">
              
              
              
              
              
              
              
              
              <nls description="Time Period Filter (Deprecated)" languageCode="en" name="Time Period Filter (Deprecated)"/>
              
              
              
              
              
              
              
              
              
              
              
              
            </attribute>
            <links>
              <link action="projmgr.assignmentProperties" code="assignmentProperties">
                
                
                
                
                <nls description="Assignment Properties" languageCode="en" name="Assignment Properties"/>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <linkParam dataRef="/data/header/action/@id" dataSource="input" paramCode="returnAction"/>
                <linkParam dataRef="assign_int_id" dataSource="data" paramCode="id"/>
                <linkParam dataRef="project_int_id" dataSource="data" paramCode="projectId"/>
              </link>
              <link action="pma.investmentProperties" code="projectProperties">
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <nls description="Project Properties" languageCode="en" name="Project Properties"/>
                <linkParam dataRef="/data/header/action/@id" dataSource="input" paramCode="return_to"/>
                <linkParam dataRef="investment_type_upper" dataSource="data" paramCode="investment_code"/>
                <linkParam dataRef="project_int_id" dataSource="data" paramCode="id"/>
              </link>
              <link action="projmgr.taskProperties" code="taskProperties">
                <nls description="Task Properties" languageCode="en" name="Task Properties"/>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <linkParam dataRef="/data/header/action/@id" dataSource="input" paramCode="returnAction"/>
                <linkParam dataRef="project_int_id" dataSource="data" paramCode="projectId"/>
                <linkParam dataRef="task_int_id" dataSource="data" paramCode="id"/>
              </link>
            </links>
          </query>
        </queries>
      </contentPack>
    </NikuDataBus>