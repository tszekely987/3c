<?xml version="1.0" encoding="UTF-8" standalone="no"?><QueryResult xmlns="http://www.niku.com/xog/Query" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <Code>capture3c.get_db_procedure</Code>
      <Records>
        <Record>
          <code>PAC_MNT_GET_EMPLOYEE_ROLES_SP</code>
          <parallel>NO</parallel>
          <definition>
  CREATE OR REPLACE EDITIONABLE PROCEDURE "PPM"."PAC_MNT_GET_EMPLOYEE_ROLES_SP" (
  in_clntcode      IN VARCHAR2  DEFAULT '',
  in_projid        IN VARCHAR2  DEFAULT '',
  in_employee_role IN VARCHAR2  DEFAULT NULL,
  in_emplycode     IN VARCHAR2  DEFAULT NULL,
  RESOURCE_CODE       VARCHAR2 ,
  RC1          IN OUT PAC_MNT_GET_EMPLOYEE_ROLES_Pkg.RCT1)
AS
  COMPANY_CODE     GLOBALPKG.STRING;
  PROJECT_CODE     GLOBALPKG.STRING;
  ROLE_CODE        GLOBALPKG.STRING;
  L_RESOURCE_CODE  GLOBALPKG.STRING;
  StoO_selcnt      INTEGER;
  StoO_error       INTEGER;
  StoO_rowcnt      INTEGER;
  StoO_crowcnt     INTEGER := 0;
  StoO_fetchstatus INTEGER := 0;
  StoO_errmsg      GLOBALPKG.STRING;
  StoO_sqlstatus   INTEGER;
BEGIN
	PAC_MNT_GET_EMPLOYEE_ROLES_SP.COMPANY_CODE := PAC_MNT_GET_EMPLOYEE_ROLES_SP.in_clntcode;
	PAC_MNT_GET_EMPLOYEE_ROLES_SP.PROJECT_CODE := PAC_MNT_GET_EMPLOYEE_ROLES_SP.in_projid;
	PAC_MNT_GET_EMPLOYEE_ROLES_SP.ROLE_CODE := PAC_MNT_GET_EMPLOYEE_ROLES_SP.in_employee_role;
	PAC_MNT_GET_EMPLOYEE_ROLES_SP.L_RESOURCE_CODE := PAC_MNT_GET_EMPLOYEE_ROLES_SP.in_emplycode;

  IF  PAC_MNT_GET_EMPLOYEE_ROLES_SP.ROLE_CODE IS NULL THEN
		PAC_MNT_GET_EMPLOYEE_ROLES_SP.ROLE_CODE :=  NULL;
	END IF;
	IF  PAC_MNT_GET_EMPLOYEE_ROLES_SP.L_RESOURCE_CODE IS NULL THEN
		PAC_MNT_GET_EMPLOYEE_ROLES_SP.L_RESOURCE_CODE :=  NULL;
	END IF;

  OPEN RC1 FOR
    SELECT P.COMPANY_CODE,P.PROJECT_CODE, E.RESOURCE_CODE, R.UNIQUE_NAME "ROLE_CODE"
      FROM PRTEAM T, PAC_MNT_PROJECTS P, PAC_MNT_RESOURCES E, SRM_RESOURCES R
    WHERE P.ID = T.PRPROJECTID
      AND T.PRRESOURCEID = E.ID
      AND T.PRROLEID = R.ID
      AND R.PERSON_TYPE = 0
      AND R.RESOURCE_TYPE = 0
      AND p.COMPANY_CODE = PAC_MNT_GET_EMPLOYEE_ROLES_SP.COMPANY_CODE
      AND p.PROJECT_CODE = PAC_MNT_GET_EMPLOYEE_ROLES_SP.PROJECT_CODE
      AND E.RESOURCE_CODE = NVL(PAC_MNT_GET_EMPLOYEE_ROLES_SP.L_RESOURCE_CODE, E.RESOURCE_CODE)
      AND R.UNIQUE_NAME = NVL(PAC_MNT_GET_EMPLOYEE_ROLES_SP.ROLE_CODE, R.UNIQUE_NAME);

/*
  SELECT p.COMPANY_CODE,  p.PROJECT_CODE,  p.RESOURCE_CODE "RESOURCE_CODE",  p.ROLE_CODE "EmployeeRole"
  FROM project_roles p
	WHERE p.COMPANY_CODE = PAC_MNT_GET_EMPLOYEE_ROLES_SP.COMPANY_CODE
	 AND p.PROJECT_CODE = PAC_MNT_GET_EMPLOYEE_ROLES_SP.PROJECT_CODE
	 AND p.RESOURCE_CODE = NVL(PAC_MNT_GET_EMPLOYEE_ROLES_SP.L_RESOURCE_CODE,
	   p.RESOURCE_CODE)
	 AND p.ROLE_CODE = NVL(PAC_MNT_GET_EMPLOYEE_ROLES_SP.ROLE_CODE,
	   p.ROLE_CODE)
*/
END PAC_MNT_GET_EMPLOYEE_ROLES_SP;
 
 
 </definition>
        </Record>
      </Records>
      <Slice>
        <Number>0</Number>
        <Size>1</Size>
        <Total>1</Total>
      </Slice>
    </QueryResult>