<?xml version="1.0" encoding="UTF-8" standalone="no"?><QueryResult xmlns="http://www.niku.com/xog/Query" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <Code>capture3c.get_db_function</Code>
      <Records>
        <Record>
          <code>NK_SEGMENTS_FCT</code>
          <parallel>NO</parallel>
          <definition>
  CREATE OR REPLACE EDITIONABLE FUNCTION "PPM"."NK_SEGMENTS_FCT" (P_CURVE IN NK_CURVE, P_START IN DATE DEFAULT NULL, P_FINISH IN DATE DEFAULT NULL)
RETURN NK_SEGMENTS
AS
  V_SEGMENT NK_SEGMENT;
  V_SEGMENTS NK_SEGMENTS;
  V_START INTEGER := 2; V_FINISH INTEGER := 65534;
  S_IDX INTEGER; V_IDX INTEGER := 0;
BEGIN

  V_SEGMENTS := NK_SEGMENTS();
  IF( P_START IS NOT NULL ) THEN
    V_START := CRV_DATE_TO_JULIAN_FCT(P_START);
  END IF;

  IF( P_FINISH IS NOT NULL ) THEN
    V_FINISH := CRV_DATE_TO_JULIAN_FCT(P_FINISH);
  END IF;

  RETURN NK_SEGMENTS_JULIAN_FCT(P_CURVE, V_START, V_FINISH);

-- safety check ... if anything goes wrong just return zero
EXCEPTION
  WHEN OTHERS THEN
    RETURN V_SEGMENTS;
END;</definition>
        </Record>
      </Records>
      <Slice>
        <Number>0</Number>
        <Size>1</Size>
        <Total>1</Total>
      </Slice>
    </QueryResult>